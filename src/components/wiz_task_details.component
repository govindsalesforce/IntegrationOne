<apex:component controller="Component_Handler" >
   <apex:attribute name="capaRecord" type="CAPA__c" description="CAPA record"/>
   <apex:attribute name="containmentTask" type="General_Task__c" description="Containment Record" assignTo="{!containment}"/>
   <apex:attribute name="dispositionTask" type="General_Task__c" description="Disposition Record" assignTo="{!disposition}"/> 
   <apex:attribute name="investigationTask" type="General_Task__c" description="Investigation Record" assignTo="{!investigation}"/>
   <apex:attribute name="implementationTask" type="General_Task__c" description="Implementaion Record" assignTo="{!implementation}"/>
   <apex:attribute name="effectivenessReviewTask" type="General_Task__c" description="Effectiveness Review Record" assignTo="{!effectivenessReview}"/> 
   <apex:attribute name="adhocTasks" type="General_Task__c[]" description="Adhoc Task Records" assignTo="{!adhocs}"/> 
   <apex:attribute name="closureTask" type="General_Task__c" description="Adhoc Task Records" assignTo="{!closure}"/>
   <!--v1.1 start -->
    <apex:attribute name="DocumentChangeTask" type="General_Task__c" description="DocumentChange Task Records" assignTo="{!documentChange}"/>
    <!--v1.1 end-->
   <apex:attribute name="module" type="string" description="Represents the module" default="NC"/> 
    
   <input type="hidden" value="{!taskData}"/>
   <apex:outputPanel rendered="{!NOT(ISNULL(containmentTask))}">
       <div class="panel panel-default screen-only">
                            <div class="panel-heading" role="tab" id="headingOne">
                              <h4 class="panel-title">
                                <a class="btn btn-link btn-xs pull-right" data-toggle="collapse" data-parent="#accordionContainment_Action" href="#Containment_Action" aria-expanded="true" aria-controls="Containment_Action"><span class="glyphicon glyphicon-chevron-down" aria-hidden="true"></span>
                                
                                </a><a class="" data-toggle="collapse" data-parent="#accordionContainment_Action" href="#Containment_Action" aria-expanded="true" aria-controls="Containment_Action">
                                  Containment <span class="badge red-badge">{!containmentActions.size+containmentApprovers.size}</span>
                                </a>
                              </h4>
                            </div>
                            <div aria-expanded="true" style="" id="Containment_Action" class="panel-collapse out collapse out" role="tabpanel" aria-labelledby="headingOne">
                              <div class="panel-body">
                                  <apex:outputPanel rendered="true">
                                      <table class="table table-responsive table-bordered">
                                          <tbody>
                                              <tr>
                                                  <th>Completed By</th>
                                                  <th>Completed Date</th>
                                                  <th>Containment Details</th>
                                              </tr>
                                              <apex:repeat value="{!containmentActions}" var="containmentAction">
                                              <tr>
                                                  <td>{!containmentAction.Completed_By__r.Name}</td>
                                                  <td>
                                                      <apex:outputText value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!containmentAction.Completed_Date__c}" /> 
                                                      </apex:outputText>
                                                  </td>
                                                  <td>{!containmentAction.Sub_Task_Detail__c}</td>
                                              </tr>                                           
                                              </apex:repeat>                                                     
                                          </tbody>
                                      </table>
                                  </apex:outputPanel>
                                  <apex:outputPanel rendered="{!OR(Containment.New_Due_Date__c!=null,Containment.New_Owner__c!=null)}">
                            <h2>Approvers For Change <apex:outputText value="{!if(Containment.New_Due_Date__c!=null,' Due Date',' Owner')}"></apex:outputText></h2>
                           <table class="table table-responsive table-bordered">
                                <tbody>
                                    <tr>
                                        <th><apex:outputText value="{!if(Containment.New_Due_Date__c!=null,' Due Date',' Owner')}"></apex:outputText></th>
                                        <th><apex:outputText value="{!if(Containment.New_Due_Date__c!=null,'New Due Date','New Owner')}"></apex:outputText></th>
                                    </tr>
                                    <tr>
                                        <td>  
                                            <apex:outputPanel rendered="{!Containment.New_Due_Date__c!=null}">
                                                <apex:outputText value="{0,date,dd MMM yyyy}">
                                                    <apex:param value="{!Containment.Due_Date__c}" /> 
                                                </apex:outputText> 
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!Containment.New_Due_Date__c==null}">
                                                <apex:outputText value="{!Containment.Owner.Name}"></apex:outputText>
                                            </apex:outputPanel>                                            
                                            
                                            
                                        </td>
                                        <td>
                                            <apex:outputPanel rendered="{!Containment.New_Due_Date__c!=null}">
                                                <apex:outputText value="{0,date,dd MMM yyyy}">
                                                    <apex:param value="{!Containment.New_Due_Date__c}" /> 
                                                </apex:outputText> 
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!Containment.New_Due_Date__c==null}">
                                                <apex:outputText value="{!Containment.New_Owner__r.Name}"></apex:outputText>
                                            </apex:outputPanel>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <table class="table table-responsive table-bordered">
                                <tbody>
                                    <tr>
                                        <th>Approver</th>
                                        <th>Status</th>
                                        <th>Approved Date</th>
                                    </tr>
                                    
                                    <apex:repeat value="{!containmentChangeProcess}" var="pi">
                                        
                                            <apex:repeat value="{!pi.Workitems}" var="ps"><tr>
                                                <td>{!User[ps.OriginalActorid].Name}</td>
                                                <td>started</td>
                                                <td>
                                                    <apex:outputText value="{0,date,dd MMM yyyy}">
                                                        <apex:param value="{!ps.CreatedDate}" /> 
                                                    </apex:outputText> 
                                                </td>        </tr>                                    
                                            </apex:repeat>
                                        
                                        
                                            <apex:variable value="{!0}" var="submitter"/>
                                            <apex:repeat value="{!pi.Steps}" var="ps">
                                                   <apex:variable value="{!submitter+1}" var="submitter"/>
                                                    <apex:outputPanel rendered="{!submitter>1}" >
                                                    <tr>
                                                    <td>{!User[ps.OriginalActorid].Name}</td>
                                                    <td>{!ps.StepStatus}</td>
                                                    <td>
                                                        <apex:outputText value="{0,date,dd MMM yyyy}">
                                                            <apex:param value="{!ps.CreatedDate}" /> 
                                                        </apex:outputText> 
                                                    </td>  
                                                </tr>
                                                </apex:outputPanel>                                            
                                            </apex:repeat>
                                    </apex:repeat>
                                    
                                </tbody>
                            </table>
                        </apex:outputPanel>
                                  <apex:outputPanel rendered="true">
                                      <h2>Approvers</h2>
                                      <table class="table table-responsive table-bordered">
                                          <tbody>
                                              <tr>
                                                  <th>Approver</th>
                                                  <th>Sequence</th>
                                                  <th>Allowed Days</th>
                                                  <th>Due Date</th>
                                                  <th>Status</th>
                                                  <th>Approved Date</th>
                                              </tr>
                                              <apex:repeat value="{!containmentApprovers}" var="Ap">
                                                  <tr>
                                                      <td>{!Ap.User__r.Name}</td>
                                                      <td>{!Ap.Sequence_Position__c}</td>
                                                      <td>{!Ap.Allowed_Days__c}</td>
                                                      <td>
                                                          <apex:outputText value="{0,date,dd MMM yyyy}">
                                                              <apex:param value="{!Ap.Due_Date__c}" /> 
                                                          </apex:outputText>                                  
                                                      </td>
                                                      <td><apex:outputText value="{!Ap.Status__c}" rendered="{!Containment.Status__c!='Open'}"></apex:outputText> </td>
                                                      <td>
                                                          <apex:outputText rendered="{!Containment.Status__c!='Open'}" value="{0,date,dd MMM yyyy}">
                                                              <apex:param value="{!Ap.Status_Updated__c}" /> 
                                                          </apex:outputText>                                      
                                                      </td>
                                                  </tr>                                
                                              </apex:repeat>
                                              
                                          </tbody>
                                      </table>
                                  </apex:outputPanel>
                              </div>
                            </div>
       </div>
        <!--============================================================================print only-->
            <div class="print-only">
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="headingOne">
                        <h4 class="panel-title"><h1>Containment&nbsp;({!containmentActions.size})</h1></h4>
                        <apex:outputPanel rendered="true">
                                  <table class="table table-responsive table-bordered">
                                      <tbody>
                                          <tr>
                                              <th>Containment Action</th>
                                              <th>Completed By</th>
                                              <th>Completed Date</th>
                                              <th>Containment Details</th>
                                          </tr>
                                          <apex:repeat value="{!containmentActions}" var="subTask">
                                          <tr>
                                              <td>{!Left(subTask.Sub_Task_Detail__c,25)}</td>
                                              <td>{!subTask.Completed_By__r.Name}</td>
                                              <td>
                                                  <apex:outputText value="{0,date,dd MMM yyyy}">
                                                      <apex:param value="{!subTask.Completed_Date__c}" /> 
                                                  </apex:outputText>
                                              </td>
                                              <td>{!subTask.Sub_Task_Detail__c}</td>
                                          </tr>                                           
                                          </apex:repeat>                                                     
                                      </tbody>
                                  </table>
                              </apex:outputPanel>
                        
                         <apex:outputPanel rendered="{!OR(Containment.New_Due_Date__c!=null,Containment.New_Owner__c!=null)}">
                            <h2>Approvers For Change <apex:outputText value="{!if(Containment.New_Due_Date__c!=null,' Due Date',' Owner')}"></apex:outputText></h2>
                           <table class="table table-responsive table-bordered">
                                <tbody>
                                    <tr>
                                        <th><apex:outputText value="{!if(Containment.New_Due_Date__c!=null,' Due Date',' Owner')}"></apex:outputText></th>
                                        <th><apex:outputText value="{!if(Containment.New_Due_Date__c!=null,'New Due Date','New Owner')}"></apex:outputText></th>
                                    </tr>
                                    <tr>
                                        <td>  
                                            <apex:outputPanel rendered="{!Containment.New_Due_Date__c!=null}">
                                                <apex:outputText value="{0,date,dd MMM yyyy}">
                                                    <apex:param value="{!Containment.Due_Date__c}" /> 
                                                </apex:outputText> 
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!Containment.New_Due_Date__c==null}">
                                                <apex:outputText value="{!Containment.Owner.Name}"></apex:outputText>
                                            </apex:outputPanel>                                            
                                            
                                            
                                        </td>
                                        <td>
                                            <apex:outputPanel rendered="{!Containment.New_Due_Date__c!=null}">
                                                <apex:outputText value="{0,date,dd MMM yyyy}">
                                                    <apex:param value="{!Containment.New_Due_Date__c}" /> 
                                                </apex:outputText> 
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!Containment.New_Due_Date__c==null}">
                                                <apex:outputText value="{!Containment.New_Owner__r.Name}"></apex:outputText>
                                            </apex:outputPanel>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <table class="table table-responsive table-bordered">
                                <tbody>
                                    <tr>
                                        <th>Approver</th>
                                        <th>Status</th>
                                        <th>Approved Date</th>
                                    </tr>
                                    
                                    <apex:repeat value="{!containmentChangeProcess}" var="pi">
                                        
                                            <apex:repeat value="{!pi.Workitems}" var="ps"><tr>
                                                <td>{!User[ps.OriginalActorid].Name}</td>
                                                <td>started</td>
                                                <td>
                                                    <apex:outputText value="{0,date,dd MMM yyyy}">
                                                        <apex:param value="{!ps.CreatedDate}" /> 
                                                    </apex:outputText> 
                                                </td>        </tr>                                    
                                            </apex:repeat>
                                        
                                        
                                            <apex:variable value="{!0}" var="submitter"/>
                                            <apex:repeat value="{!pi.Steps}" var="ps">
                                                   <apex:variable value="{!submitter+1}" var="submitter"/>
                                                    <apex:outputPanel rendered="{!submitter>1}" >
                                                    <tr>
                                                    <td>{!User[ps.OriginalActorid].Name}</td>
                                                    <td>{!ps.StepStatus}</td>
                                                    <td>
                                                        <apex:outputText value="{0,date,dd MMM yyyy}">
                                                            <apex:param value="{!ps.CreatedDate}" /> 
                                                        </apex:outputText> 
                                                    </td>  
                                                </tr>
                                                </apex:outputPanel>                                            
                                            </apex:repeat>
                                    </apex:repeat>
                                    
                                </tbody>
                            </table>
                        </apex:outputPanel>   
                        
                        
                              <apex:outputPanel rendered="true">
                                  <h2>Approvers</h2>
                                  <table class="table table-responsive table-bordered">
                                      <tbody>
                                          <tr>
                                              <th>Approver</th>
                                              <th>Sequence</th>
                                              <th>Allowed Days</th>
                                              <th>Due Date</th>
                                              <th>Status</th>
                                              <th>Approved Date</th>
                                          </tr>
                                          <apex:repeat value="{!containmentApprovers}" var="Ap">
                                              <tr>
                                                  <td>{!Ap.Approver_Name__c}</td>
                                                  <td>{!Ap.Sequence_Position__c}</td>
                                                  <td>{!Ap.Allowed_Days__c}</td>
                                                  <td>
                                                      <apex:outputText value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!Ap.Due_Date__c}" /> 
                                                      </apex:outputText>                                  
                                                  </td>
                                                  <td>{!Ap.Status__c}</td>
                                                  <td>
                                                      <apex:outputText value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!Ap.Status_Updated__c}" /> 
                                                      </apex:outputText>                                      
                                                  </td>
                                              </tr>                                
                                          </apex:repeat>
                                          
                                      </tbody>
                                  </table>    
                        </apex:outputPanel>
                    </div>
                </div>
            </div>
 </apex:outputPanel>
 <apex:outputPanel rendered="{!NOT(ISNULL(dispositionTask))}">
      <div class="panel panel-default screen-only">
                        <div class="panel-heading" role="tab" id="headingOne"> 
                          <h4 class="panel-title">
                            <a class="btn btn-link btn-xs pull-right collapsed" data-toggle="collapse" data-parent="#accordion" href="#DispositionNCDetails" aria-expanded="false" aria-controls="DispositionNCDetails"><span class="glyphicon glyphicon-chevron-down" aria-hidden="true"></span>
                            
                            </a><a class="collapsed" data-toggle="collapse" data-parent="#accordion" href="#DispositionNCDetails" aria-expanded="false" aria-controls="DispositionNCDetails">
                              Disposition - {!disposition.Owner__r.Name} | &nbsp;
                                  <apex:outputText value="{0,date,dd MMM yyyy}">
                                      <apex:param value="{!disposition.Due_Date__c}" /> 
                                  </apex:outputText>
                              <span class="badge red-badge">{!dispositionSections.size+dispositionApprovers.size}</span>
                            </a>
                          </h4>
                        </div>
                         
                        <div aria-expanded="true" style="" id="DispositionNCDetails" class="panel-collapse out collapse out" role="tabpanel" aria-labelledby="headingOne">
                         <apex:repeat value="{!dispositionSections}" var="ds">
                          <div class="panel-body">                              
                              <apex:repeat value="{!ds.Disposition_Products__r}" var="dp">
                              <h2>{!Ds.Disposition_Type__c} </h2>
                              
                              <table class="table table-responsive table-bordered">
                                  <tbody>
                                      <tr>
                                          <th> Product </th>
                                          <th>{!$ObjectType.Disposition_Product__c.Fields.Product_Batch__c.Label}</th>
                                          <th>{!$ObjectType.Disposition_Product__c.Fields.Dispose_Quantity__c.Label}</th>
                                      </tr>
                                      <tr>
                                          <td>{!DP.NC_Product__c}</td>
                                          <td>{!DP.Product_Batch__c}</td>
                                          <td>{!DP.Dispose_Quantity__c}</td>
                                      </tr>
                                  </tbody>
                              </table>
                              </apex:repeat>
                              
                              <h2>Task Assigned to</h2>
                              <table class="table table-responsive table-bordered">
                                  <tbody>
                                      <tr>
                                          <th>{!$ObjectType.General_Sub_Task__c.Fields.Assign_User__c.Label}</th>
                                          <th>{!$ObjectType.General_Sub_Task__c.Fields.Due_Date__c.Label}</th>
                                          <th>{!$ObjectType.General_Sub_Task__c.Fields.Complete__c.Label}</th>
                                      </tr>
                                      
                                      <tr>
                                          <td>{!ds.Assign_User__c}</td>
                                          <td>
                                              <apex:outputText value="{0,date,dd MMM yyyy}">
                                                  <apex:param value="{!Ds.Due_Date__c}" /> 
                                              </apex:outputText>                                          
                                          </td>
                                          <td>{!ds.Complete__c}</td>
                                      </tr>
                                      
                                      <tr>
                                          <td colspan="3">
                                              <h4>{!$ObjectType.General_Sub_Task__c.Fields.Disposition_Instruction__c.Label}</h4>
                                              <p>
                                                  {!ds.Disposition_Instruction__c}
                                              </p>
                                          </td>
                                          
                                      </tr>
                                      
                                  </tbody>
                                  
                              </table>                          
                              
                            </div>
                          </apex:repeat>
                          
 <div class="panel-body">  
                <!--=======================================-->
                 <apex:outputPanel rendered="{!OR(dispositionTask.New_Due_Date__c!=null,dispositionTask.New_Owner__c!=null)}">
                    <h2>Approvers For Change <apex:outputText value="{!if(dispositionTask.New_Due_Date__c!=null,' Due Date',' Owner')}"></apex:outputText></h2>
                    <table class="table table-responsive table-bordered">
                                <tbody>
                                    <tr>
                                        <th><apex:outputText value="{!if(dispositionTask.New_Due_Date__c!=null,' Due Date',' Owner')}"></apex:outputText></th>
                                        <th><apex:outputText value="{!if(dispositionTask.New_Due_Date__c!=null,'New Due Date','New Owner')}"></apex:outputText></th>
                                    </tr>
                                    <tr>
                                        <td>  
                                            <apex:outputPanel rendered="{!dispositionTask.New_Due_Date__c!=null}">
                                                <apex:outputText value="{0,date,dd MMM yyyy}">
                                                    <apex:param value="{!dispositionTask.Due_Date__c}" /> 
                                                </apex:outputText> 
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!dispositionTask.New_Due_Date__c==null}">
                                                <apex:outputText value="{!dispositionTask.Owner.Name}"></apex:outputText>
                                            </apex:outputPanel>                                            
                                            
                                            
                                        </td>
                                        <td>
                                            <apex:outputPanel rendered="{!dispositionTask.New_Due_Date__c!=null}">
                                                <apex:outputText value="{0,date,dd MMM yyyy}">
                                                    <apex:param value="{!dispositionTask.New_Due_Date__c}" /> 
                                                </apex:outputText> 
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!dispositionTask.New_Due_Date__c==null}">
                                                <apex:outputText value="{!dispositionTask.New_Owner__r.Name}"></apex:outputText>
                                            </apex:outputPanel>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                    <table class="table table-responsive table-bordered">
                        <tbody>
                            <tr>
                                <th>Approver</th>
                                <th>Status</th>
                                <th>Approved Date</th>
                            </tr>
                            
                            <apex:repeat value="{!dispositionChangeProcess}" var="pi">
                                
                                    <apex:repeat value="{!pi.Workitems}" var="ps"><tr>
                                        <td>{!User[ps.OriginalActorid].Name}</td>
                                        <td>started</td>
                                        <td>
                                            <apex:outputText value="{0,date,dd MMM yyyy}">
                                                <apex:param value="{!ps.CreatedDate}" /> 
                                            </apex:outputText> 
                                            
                                        </td>       </tr>                                     
                                    </apex:repeat>
                                
                                
                                    <apex:variable value="{!0}" var="submitter"/>
                                    <apex:repeat rendered="{!submitter!=0}" value="{!pi.Steps}" var="ps">
                                        <apex:variable value="{!submitter+1}" var="submitter"/>
                                         <apex:outputPanel rendered="{!submitter>1}" >
                                        <tr>
                                        <td>{!User[ps.OriginalActorid].Name}</td>
                                        <td>{!ps.StepStatus}</td>
                                        <td>
                                            <apex:outputText value="{0,date,dd MMM yyyy}">
                                                <apex:param value="{!ps.CreatedDate}" /> 
                                            </apex:outputText> 
                                        </td>  </tr>
                                         </apex:outputPanel>

                                    </apex:repeat>
                                
                            </apex:repeat>
                            
                        </tbody>
                    </table>
                </apex:outputPanel>   
                 
                <!--=======================================-->                          
                          
                       
                          <div class="panel-body">


                              <apex:outputPanel rendered="true">
                                  <h2>Approvers</h2>
                                  <table class="table table-responsive table-bordered">
                                      <tbody>
                                          <tr>
                                              <th>Approver</th>
                                              <th>Sequence</th>
                                              <th>Allowed Days</th>
                                              <th>Due Date</th>
                                              <th>Status</th>
                                              <th>Approved Date</th>
                                          </tr>
                                          <apex:repeat value="{!dispositionApprovers}" var="Ap">
                                              <tr>
                                                  <td>{!Ap.Approver_Name__c}</td>
                                                  <td>{!Ap.Sequence_Position__c}</td>
                                                  <td>{!Ap.Allowed_Days__c}</td>
                                                  <td>
                                                      <apex:outputText value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!Ap.Due_Date__c}" /> 
                                                      </apex:outputText>                                  
                                                  </td>
                                                  <td>{!Ap.Status__c}</td>
                                                  <td>
                                                      <apex:outputText value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!Ap.Status_Updated__c}" /> 
                                                      </apex:outputText>                                      
                                                  </td>
                                              </tr>                                
                                          </apex:repeat>
                                          
                                      </tbody>
                                  </table>
                              </apex:outputPanel>


                          </div>
                        </div>
                      </div>   
                      </div>
              <!-----------------------------------print-only-------------------------->
                <div class="print-only">
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="headingOne">
                        <h4 class="panel-title"><h1> Disposition - {!disposition.Owner__r.Name} | &nbsp;
                                  <apex:outputText value="{0,date,dd MMM yyyy}">
                                      <apex:param value="{!disposition.Due_Date__c}" /> 
                                  </apex:outputText>
                              ({!dispositionSections.size})</h1></h4>
                        
                   <apex:repeat value="{!dispositionSections}" var="Ds">
                        <div aria-expanded="true" style="" id="DispositionNCDetails" class="panel-collapse out collapse in" role="tabpanel" aria-labelledby="headingOne">
                          <div class="panel-body">                              
                              <apex:repeat value="{!Ds.Disposition_Products__r}" var="dp">
                              <h2>{!Ds.Disposition_Type__c} (22)</h2>
                              
                              <table class="table table-responsive table-bordered">
                                  <tbody>
                                      <tr>
                                          <th>{!$ObjectType.Disposition_Product__c.Fields.NC_Product__c.Label}</th>
                                          <th>{!$ObjectType.Disposition_Product__c.Fields.Product_Batch__c.Label}</th>
                                          <th>{!$ObjectType.Disposition_Product__c.Fields.Dispose_Quantity__c.Label}</th>
                                      </tr>
                                      <tr>
                                          <td>{!DP.NC_Product__c}</td>
                                          <td>{!DP.Product_Batch__c}</td>
                                          <td>{!DP.Dispose_Quantity__c}</td>
                                      </tr>
                                  </tbody>
                              </table>
                              </apex:repeat>
                              
                              <h2>Task Assigned to</h2>
                              <table class="table table-responsive table-bordered">
                                  <tbody>
                                      <tr>
                                          <th>{!$ObjectType.General_Sub_Task__c.Fields.Assign_User__c.Label}</th>
                                          <th>{!$ObjectType.General_Sub_Task__c.Fields.Due_Date__c.Label}</th>
                                          <th>{!$ObjectType.General_Sub_Task__c.Fields.Complete__c.Label}</th>
                                      </tr>
                                      
                                      <tr>
                                          <td>{!Ds.Assign_User__c}</td>
                                          <td>
                                              <apex:outputText value="{0,date,dd MMM yyyy}">
                                                  <apex:param value="{!Ds.Due_Date__c}" /> 
                                              </apex:outputText>                                          
                                          </td>
                                          <td>{!Ds.Complete__c}</td>
                                      </tr>
                                      
                                      <tr>
                                          <td colspan="3">
                                              <h4>{!$ObjectType.General_Sub_Task__c.Fields.Disposition_Instruction__c.Label}</h4>
                                              <p>
                                                  {!Ds.Disposition_Instruction__c}
                                              </p>
                                          </td>
                                          
                                      </tr>
                                      
                                  </tbody>
                                  
                              </table>                          
                              
                            </div></div>
                          </apex:repeat>
                          
                          
                          
                          
                          
  <div class="panel-body">  
                <!--=======================================-->
                <apex:outputPanel rendered="{!OR(disposition.New_Due_Date__c!=null,disposition.New_Owner__c!=null)}">
                    <h2>Approvers For Change <apex:outputText value="{!if(disposition.New_Due_Date__c!=null,' Due Date',' Owner')}"></apex:outputText></h2>
                    <table class="table table-responsive table-bordered">
                                <tbody>
                                    <tr>
                                        <th><apex:outputText value="{!if(disposition.New_Due_Date__c!=null,' Due Date',' Owner')}"></apex:outputText></th>
                                        <th><apex:outputText value="{!if(disposition.New_Due_Date__c!=null,'New Due Date','New Owner')}"></apex:outputText></th>
                                    </tr>
                                    <tr>
                                        <td>  
                                            <apex:outputPanel rendered="{!disposition.New_Due_Date__c!=null}">
                                                <apex:outputText value="{0,date,dd MMM yyyy}">
                                                    <apex:param value="{!disposition.Due_Date__c}" /> 
                                                </apex:outputText> 
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!disposition.New_Due_Date__c==null}">
                                                <apex:outputText value="{!disposition.Owner.Name}"></apex:outputText>
                                            </apex:outputPanel>                                            
                                            
                                            
                                        </td>
                                        <td>
                                            <apex:outputPanel rendered="{!disposition.New_Due_Date__c!=null}">
                                                <apex:outputText value="{0,date,dd MMM yyyy}">
                                                    <apex:param value="{!disposition.New_Due_Date__c}" /> 
                                                </apex:outputText> 
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!disposition.New_Due_Date__c==null}">
                                                <apex:outputText value="{!disposition.New_Owner__r.Name}"></apex:outputText>
                                            </apex:outputPanel>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                    <table class="table table-responsive table-bordered">
                        <tbody>
                            <tr>
                                <th>Approver</th>
                                <th>Status</th>
                                <th>Approved Date</th>
                            </tr>
                            
                            <apex:repeat value="{!dispositionChangeProcess}" var="pi">
                                <tr>
                                    <apex:repeat value="{!pi.Workitems}" var="ps">
                                        <td>{!User[ps.OriginalActorid].Name}</td>
                                        <td>started</td>
                                        <td>
                                            <apex:outputText value="{0,date,dd MMM yyyy}">
                                                <apex:param value="{!ps.CreatedDate}" /> 
                                            </apex:outputText> 
                                            
                                        </td>                                            
                                    </apex:repeat>
                                </tr>
                                <tr>
                                    <apex:variable value="{!0}" var="submitter"/>
                                    <apex:repeat rendered="{!submitter!=0}" value="{!pi.Steps}" var="ps">
                                        <apex:variable value="{!submitter+1}" var="submitter"/>
                                        <td>{!User[ps.OriginalActorid].Name}</td>
                                        <td>{!ps.StepStatus}</td>
                                        <td>
                                            <apex:outputText value="{0,date,dd MMM yyyy}">
                                                <apex:param value="{!ps.CreatedDate}" /> 
                                            </apex:outputText> 
                                        </td>  

                                    </apex:repeat>
                                </tr>
                            </apex:repeat>
                            
                        </tbody>
                    </table>
                </apex:outputPanel>   
                <!--=======================================-->                          
                          
                          
                          
                              <apex:outputPanel rendered="true">
                                  <h2>Approvers</h2>
                                  <table class="table table-responsive table-bordered">
                                      <tbody>
                                          <tr>
                                              <th>Approver</th>
                                              <th>Sequence</th>
                                              <th>Allowed Days</th>
                                              <th>Due Date</th>
                                              <th>Status</th>
                                              <th>Approved Date</th>
                                          </tr>
                                          <apex:repeat value="{!dispositionApprovers}" var="Ap">
                                              <tr>
                                                  <td>{!Ap.Approver_Name__c}</td>
                                                  <td>{!Ap.Sequence_Position__c}</td>
                                                  <td>{!Ap.Allowed_Days__c}</td>
                                                  <td>
                                                      <apex:outputText value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!Ap.Due_Date__c}" /> 
                                                      </apex:outputText>                                  
                                                  </td>
                                                  <td>{!Ap.Status__c}</td>
                                                  <td>
                                                      <apex:outputText value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!Ap.Status_Updated__c}" /> 
                                                      </apex:outputText>                                      
                                                  </td>
                                              </tr>                                
                                          </apex:repeat>
                                          
                                      </tbody>
                                  </table>    
                        </apex:outputPanel>
                        </div>
                    </div>
                </div>
            </div>

 </apex:outputPanel>
 <apex:outputPanel rendered="{!NOT(ISNULL(investigationTask))}">
     <div class="panel panel-default screen-only">
                        <div class="panel-heading" role="tab" id="headingOne">
                          <h4 class="panel-title"> 
                            <a class="btn btn-link btn-xs pull-right" data-toggle="collapse" data-parent="#accordioninvestigationDetails" href="#investigationDetails" aria-expanded="true" aria-controls="item_8"><span class="glyphicon glyphicon-chevron-down" aria-hidden="true"></span>
                            
                            </a><a class="" data-toggle="collapse" data-parent="#accordioninvestigationDetails" href="#investigationDetails" aria-expanded="true" aria-controls="item_8">
                              Investigation - {!investigation.Owner__r.Name} | &nbsp;
                                  <apex:outputText value="{0,date,dd MMM yyyy}">
                                      <apex:param value="{!investigation.Due_Date__c}" /> 
                                  </apex:outputText>
                              <span class="badge red-badge">{!rootCauses.size+investigationApprovers.Size}</span>
                            </a>
                          </h4>
                        </div>
                        <div aria-expanded="true" style="" id="investigationDetails" class="panel-collapse out collapse out" role="tabpanel" aria-labelledby="headingOne">
                          <div class="panel-body">

                            <h2>Investigation Details</h2>

                            <table class="table table-responsive table-bordered">
                              <tbody>
                                <tr>
                                  <td class="title-col" style="width: 20%">
                                    {!$ObjectType.General_Task__c.Fields.Investigation_Tools__c.Label}:  
                                  </td>
                                  <td>
                                    {!investigation.Investigation_Tools__c}
                                  </td>
                                </tr>
                                <tr>
                                  <td class="title-col">
                                    {!$ObjectType.General_Task__c.Fields.Investigation_Summary__c.Label}:
                                  </td>
                                  <td>
                                      <apex:outputfield value="{!investigation.Investigation_Summary__c}"/>
                                  </td>
                                </tr>
                          
                              </tbody>
                            </table>

                              <apex:outputPanel rendered="true">
                                  <h2>Root Cause</h2>
                                  <apex:repeat value="{!rootCauses}" var="RC">
                                      <table class="table table-responsive table-bordered">                                
                                          <tbody>
                                             <apex:outputPanel rendered="{!module=='NC'}">
                                              <tr>
                                                  <td class="title-col" style="width: 20%">
                                                      Product: 
                                                  </td>
                                                  <td>
                                                      {!RC.Product__r.Name}
                                                  </td>
                                              </tr>
                                              <tr>
                                                  <td class="title-col">
                                                      Defect Code:
                                                  </td>
                                                  <td>
                                                      {!RC.Defect__r.Name}
                                                  </td>
                                              </tr>
                                              <tr>
                                                  <td class="title-col">
                                                      Details:
                                                  </td>
                                                  <td>
                                                       <apex:outputfield value="{!RC.Defect_Description__c}"/>
                                                  </td>
                                              </tr>
                                              </apex:outputPanel>
                                              <tr>
                                                  <td class="title-col">
                                                      {!$ObjectType.General_Sub_Task__c.Fields.Cause_Code__c.Label}:
                                                  </td>
                                                  <td>
                                                      {!RC.Cause_Code__r.Name}
                                                  </td>
                                              </tr>
                                              <tr>
                                                  <td class="title-col">
                                                      {!$ObjectType.General_Sub_Task__c.Fields.Cause_Code_Description__c.Label}:
                                                  </td>
                                                  <td>
                                                      <apex:outputfield value="{!RC.Cause_Code_Description__c}"/>
                                                  </td>
                                              </tr>
                                              
                                          </tbody>
                                      </table>
                                      <br/>
                                  </apex:repeat>                               
                              </apex:outputPanel>
                              <apex:outputPanel layout="none"  rendered="{!module=='CAPA'}">
                                  <apex:outputpanel layout="none" rendered="{!capaRecord.CAPA_Risk_Assessment_Required__c == 'No' }">
                                      <h2> Risk Assessment Not Required </h2>
                                  </apex:outputpanel>
                                  <apex:outputpanel rendered="{!capaRecord.CAPA_Risk_Assessment_Required__c == 'Yes' }">
                                            <h2> Risk Assessment Required </h2>
                                            <table class="table table-responsive table-bordered">
                                                <tbody>
                                                    
                                                    <tr>
                                                        <td class="title-col" style="width: 20%">
                                                            {!$ObjectType.CAPA__c.Fields.Risk_Severity__c.Label}:  
                                                        </td>
                                                        <td>
                                                            {!JSENCODE(capaRecord.Risk_Severity__r.Name)}
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="title-col">
                                                            {!$ObjectType.CAPA__c.Fields.Risk_Occurrence__c.Label}:  
                                                        </td>
                                                        <td>
                                                            {!JSENCODE(capaRecord.Risk_Occurrence__r.Name)} 
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="title-col">
                                                           {!$ObjectType.CAPA__c.Fields.Risk_Priority__c.Label}: 
                                                        </td>
                                                        <td>
                                                            {!JSENCODE(capaRecord.Risk_Priority__r.Name)}
                                                        </td>
                                                    </tr>
                                                    
                                                    <tr>
                                                        <td class="title-col">
                                                            {!$ObjectType.CAPA__c.Fields.Risk_Description__c.Label}: 
                                                        </td>
                                                        <td >
                                                            <div class="alert alert-info"> 
                                                                <apex:outputField value="{!capaRecord.Risk_Description__c}" /> 
                                                               
                                                            </div>
                                                            
                                                        </td>
                                                    </tr>
                                                    
                                                    
                                                </tbody>
                                          </table>
                             </apex:outputpanel>
                              </apex:outputPanel>               
                              
                              <!--=======================================-->
                              <apex:outputPanel rendered="{!OR(investigation.New_Due_Date__c!=null,investigation.New_Owner__c!=null)}">
                                  <h2>Approvers For Change <apex:outputText value="{!if(investigation.New_Due_Date__c!=null,' Due Date',' Owner')}"></apex:outputText></h2>
                                  <table class="table table-responsive table-bordered">
                                      <tbody>
                                          <tr>
                                              <th><apex:outputText value="{!if(investigation.New_Due_Date__c!=null,' Due Date',' Owner')}"></apex:outputText></th>
                                              <th><apex:outputText value="{!if(investigation.New_Due_Date__c!=null,'New Due Date','New Owner')}"></apex:outputText></th>
                                          </tr>
                                          <tr>
                                              <td>  
                                                  <apex:outputPanel rendered="{!investigation.New_Due_Date__c!=null}">
                                                      <apex:outputText value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!investigation.Due_Date__c}" /> 
                                                      </apex:outputText> 
                                                  </apex:outputPanel>
                                                  <apex:outputPanel rendered="{!investigation.New_Due_Date__c==null}">
                                                      <apex:outputText value="{!investigation.Owner.Name}"></apex:outputText>
                                                  </apex:outputPanel>                                            
                                                  
                                                  
                                              </td>
                                              <td>
                                                  <apex:outputPanel rendered="{!investigation.New_Due_Date__c!=null}">
                                                      <apex:outputText value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!investigation.New_Due_Date__c}" /> 
                                                      </apex:outputText> 
                                                  </apex:outputPanel>
                                                  <apex:outputPanel rendered="{!investigation.New_Due_Date__c==null}">
                                                      <apex:outputText value="{!investigation.New_Owner__r.Name}"></apex:outputText>
                                                  </apex:outputPanel>
                                              </td>
                                          </tr>
                                      </tbody>
                                  </table>
                                  <table class="table table-responsive table-bordered">
                                      <tbody>
                                          <tr>
                                              <th>Approver</th>
                                              <th>Status</th>
                                              <th>Approved Date</th>
                                          </tr>
                                          
                                          <apex:repeat value="{!investigationChangeProcess}" var="pi">
                                             
                                                  <apex:repeat value="{!pi.Workitems}" var="ps"> <tr>
                                                      <td>{!User[ps.OriginalActorid].Name}</td>
                                                      <td>started</td>
                                                      <td>
                                                          <apex:outputText value="{0,date,dd MMM yyyy}">
                                                              <apex:param value="{!ps.CreatedDate}" /> 
                                                          </apex:outputText> 
                                                      </td>     </tr>                                       
                                                  </apex:repeat>
                                              
                                              
                                                  <apex:variable value="{!0}" var="submitter"/>
                                                  <apex:repeat value="{!pi.Steps}" var="ps">
                                                   <apex:variable value="{!submitter+1}" var="submitter"/>
                                                    <apex:outputPanel rendered="{!submitter>1}" >
                                                    <tr>
                                                    <td>{!User[ps.OriginalActorid].Name}</td>
                                                    <td>{!ps.StepStatus}</td>
                                                    <td>
                                                        <apex:outputText value="{0,date,dd MMM yyyy}">
                                                            <apex:param value="{!ps.CreatedDate}" /> 
                                                        </apex:outputText> 
                                                    </td>  
                                                </tr>
                                                </apex:outputPanel>                                      
                                                  </apex:repeat>
                                              
                                          </apex:repeat>
                                          
                                      </tbody>
                                  </table>
                              </apex:outputPanel>   
                              
                              <apex:outputPanel rendered="true">
                                  <h2>Approvers</h2>
                                  <table class="table table-responsive table-bordered">
                                      <tbody>
                                          <tr>
                                              <th>Approver</th>
                                              <th>Sequence</th>
                                              <th>Allowed Days</th>
                                              <th>Due Date</th>
                                              <th>Status</th>
                                              <th>Approved Date</th>
                                          </tr>
                                          <apex:repeat value="{!investigationApprovers}" var="Ap">
                                              <tr>
                                                  <td>{!Ap.Approver_Name__c}</td>
                                                  <td>{!Ap.Sequence_Position__c}</td>
                                                  <td>{!Ap.Allowed_Days__c}</td>
                                                  <td>
                                                      <apex:outputText value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!Ap.Due_Date__c}" /> 
                                                      </apex:outputText>                                  
                                                  </td>
                                                  <td>{!Ap.Status__c}</td>
                                                  <td>
                                                      <apex:outputText value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!Ap.Status_Updated__c}" /> 
                                                      </apex:outputText>                                      
                                                  </td>
                                              </tr>                                
                                          </apex:repeat>
                                          
                                      </tbody>
                                  </table>
                              </apex:outputPanel>

                          </div>
                        </div>
                      </div>
          <div class="print-only">
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="headingOne">
                        <h4 class="panel-title"><h1>                              Investigation - {!investigation.Owner__r.Name} | &nbsp;
                                  <apex:outputText value="{0,date,dd MMM yyyy}">
                                      <apex:param value="{!investigation.Due_Date__c}" /> 
                                  </apex:outputText>
                              ({!investigationApprovers.size+rootCauses.size})</h1></h4>
                              <apex:outputPanel rendered="true">
                                  <h2>Root Cause</h2>
                                  <apex:repeat value="{!rootCauses}" var="RC">
                                      <table class="table table-responsive table-bordered">                                
                                          <tbody>
                                              <tr>
                                                  <td class="title-col" style="width: 20%">
                                                      Product: 
                                                  </td>
                                                  <td>
                                                      {!RC.Product__r.Name}
                                                  </td>
                                              </tr>
                                              <tr>
                                                  <td class="title-col">
                                                      Defect Code:
                                                  </td>
                                                  <td>
                                                      {!RC.Defect__r.Name}
                                                  </td>
                                              </tr>
                                              <tr>
                                                  <td class="title-col">
                                                      Details:
                                                  </td>
                                                  <td>
                                                      {!RC.Defect_Description__c}
                                                  </td>
                                              </tr>
                                              <tr>
                                                  <td class="title-col">
                                                      {!$ObjectType.General_Sub_Task__c.Fields.Cause_Code__c.Label}:
                                                  </td>
                                                  <td>
                                                      {!RC.Cause_Code__r.Name}
                                                  </td>
                                              </tr>
                                              <tr>
                                                  <td class="title-col">
                                                      {!$ObjectType.General_Sub_Task__c.Fields.Cause_Code_Description__c.Label}:
                                                  </td>
                                                  <td>
                                                      {!RC.Cause_Code_Description__c}
                                                  </td>
                                              </tr>
                                              
                                          </tbody>
                                      </table>
                                      <br/>
                                  </apex:repeat>                               
                              </apex:outputPanel>
                              <apex:outputPanel layout="none"  rendered="{!module=='CAPA'}">
                                  <apex:outputpanel layout="none" rendered="{!capaRecord.CAPA_Risk_Assessment_Required__c == 'No' }">
                                      <h2> Risk Assessment Not Required </h2>
                                  </apex:outputpanel>
                                  <apex:outputpanel rendered="{!capaRecord.CAPA_Risk_Assessment_Required__c == 'Yes' }">
                                            <h2> Risk Assessment Required </h2>
                                            <table class="table table-responsive table-bordered">
                                                <tbody>
                                                    
                                                    <tr>
                                                        <td class="title-col" style="width: 20%">
                                                            {!$ObjectType.CAPA__c.Fields.Risk_Severity__c.Label}:  
                                                        </td>
                                                        <td>
                                                            {!JSENCODE(capaRecord.Risk_Severity__r.Name)}
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="title-col">
                                                            {!$ObjectType.CAPA__c.Fields.Risk_Occurrence__c.Label}:  
                                                        </td>
                                                        <td>
                                                            {!JSENCODE(capaRecord.Risk_Occurrence__r.Name)} 
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="title-col">
                                                           {!$ObjectType.CAPA__c.Fields.Risk_Priority__c.Label}: 
                                                        </td>
                                                        <td>
                                                            {!JSENCODE(capaRecord.Risk_Priority__r.Name)}
                                                        </td>
                                                    </tr>
                                                    
                                                    <tr>
                                                        <td class="title-col">
                                                            {!$ObjectType.CAPA__c.Fields.Risk_Description__c.Label}: 
                                                        </td>
                                                        <td >
                                                            <div class="alert alert-info"> 
                                                                <apex:outputField value="{!capaRecord.Risk_Description__c}" /> 
                                                               
                                                            </div>
                                                            
                                                        </td>
                                                    </tr>
                                                    
                                                    
                                                </tbody>
                                          </table>
                             </apex:outputpanel>
                         </apex:outputPanel>

                              <apex:outputPanel rendered="true">
                                  <h2>Approvers</h2>
                                  <table class="table table-responsive table-bordered">
                                      <tbody>
                                          <tr>
                                              <th>Approver</th>
                                              <th>Sequence</th>
                                              <th>Allowed Days</th>
                                              <th>Due Date</th>
                                              <th>Status</th>
                                              <th>Approved Date</th>
                                          </tr>
                                          <apex:repeat value="{!investigationApprovers}" var="Ap">
                                              <tr>
                                                  <td>{!Ap.Approver_Name__c}</td>
                                                  <td>{!Ap.Sequence_Position__c}</td>
                                                  <td>{!Ap.Allowed_Days__c}</td>
                                                  <td>
                                                      <apex:outputText value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!Ap.Due_Date__c}" /> 
                                                      </apex:outputText>                                  
                                                  </td>
                                                  <td>{!Ap.Status__c}</td>
                                                  <td>
                                                      <apex:outputText value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!Ap.Status_Updated__c}" /> 
                                                      </apex:outputText>                                      
                                                  </td>
                                              </tr>                                
                                          </apex:repeat>
                                          
                                      </tbody>
                                  </table>    
                        </apex:outputPanel>
                    </div>
                </div>
            </div>

 </apex:outputPanel>
 <apex:outputPanel rendered="{!NOT(ISBLANK(implementationTask))}">
       <div class="panel panel-default screen-only">
                        <div class="panel-heading" role="tab" id="headingOne">
                          <h4 class="panel-title">
                            <a class="btn btn-link btn-xs pull-right" data-toggle="collapse" data-parent="#accordion" href="#implementationDetails" aria-expanded="true" aria-controls="implementationDetails"><span class="glyphicon glyphicon-chevron-down" aria-hidden="true"></span>
                            
                            </a><a class="" data-toggle="collapse" data-parent="#accordion" href="#implementationDetails" aria-expanded="true" aria-controls="implementationDetails">
                              Implementation - {!implementationTask.Owner__r.Name} |  &nbsp;
                                  <apex:outputText value="{0,date,dd MMM yyyy}">
                                      <apex:param value="{!implementationTask.Due_Date__c}" /> 
                                  </apex:outputText>
                              <span class="badge red-badge">{!actionPlans.size+implementationApprovers.Size}</span>
                            </a>
                          </h4>
                        </div>
                        <div aria-expanded="true" style="" id="implementationDetails" class="panel-collapse out collapse out" role="tabpanel" aria-labelledby="headingOne">
                          <div class="panel-body">

                            
                            <h2>Action Plans</h2>
                                  <apex:repeat value="{!actionPlans}" var="AP">
                              <table class="table table-responsive table-bordered">                                      
                                      <tbody>
                                          
                                          <tr>
                                              <td colspan="3">
                                                  <h4>{!AP.Type__c}</h4>
                                              </td>
                                          </tr>
                                          
                                          
                                          <tr>
                                              <th>{!$ObjectType.General_Sub_Task__c.Fields.Assigned_User__c.Label}</th>
                                              <th>{!$ObjectType.General_Sub_Task__c.Fields.Due_Date__c.Label}</th>
                                              <th>{!$ObjectType.General_Sub_Task__c.Fields.Action_Plan_Status__c.Label}</th>
                                          </tr>
                                          
                                          <tr>
                                              <td>{!AP.Assigned_User__r.Name}</td>
                                              <td>
                                                  <apex:outputText value="{0,date,dd MMM yyyy}">
                                                      <apex:param value="{!AP.Due_Date__c}" /> 
                                                  </apex:outputText>                                                  
                                              </td>
                                              <td>{!AP.Action_Plan_Status__c}</td>
                                          </tr>
                                          
                                          <tr>
                                              <td colspan="3">
                                                  <h4>{!$ObjectType.General_Sub_Task__c.Fields.Title__c.Label}</h4>
                                                  <p>
                                                    {!AP.Title__c}
                                                  </p>
                                              </td>
                                          </tr>
                                          <tr>
                                          <td colspan="3">
                                                  <h4>{!$ObjectType.General_Sub_Task__c.Fields.Description__c.Label}</h4> 
                                                  <p>
                                                    {!AP.Description__c}
                                                  </p>
                                              </td>
                                          </tr>
                                          <tr>
                                              <td colspan="3">
                                                  <h4> {!$ObjectType.General_Sub_Task__c.Fields.Associated_Root_Causes__c.Label}</h4>
                                                  <p>
                                                      <fieldset disabled="disabled">
                                                 <c:wiz_multi FieldId="Added_Associated_Root_Causes__c{!AP.Id}" 
                                                              FieldName="Associated_Root_Causes__c" 
                                                              multiple="true" 
                                                              queryFields="Cause_Code_Name__c" 
                                                              querytable="General_Sub_Task__c" 
                                                              disabled="true">
                                                     <apex:repeat value="{!AP.Action_Plans_Root_Causes__r}" var="rc">
                                                         <option selected="selected" value="{!rc.id}">{!JSENCODE(rc.Task_Root_Cause__r.Cause_Code_Name__c)}</option>
                                                     </apex:repeat>
                                                 </c:wiz_multi> </fieldset>
                                                  
                                                  
                                                  
                                                  </p>
                                              </td>
                                          </tr>
                                          
                                          <tr>
                                              <td colspan="3">
                                                  <h4>   {!$ObjectType.General_Sub_Task__c.Fields.Completed_By__c.Label}: </h4>{!AP.Completed_By__r.Name}
                                              </td>
                                          </tr>
                                          <tr>
                                              <td colspan="3">
                                              <h4>   {!$ObjectType.General_Sub_Task__c.Fields.Completed_Date__c.Label}: </h4>
                                              <apex:outputText value="{0,date,dd MMM yyyy}">
                                                  <apex:param value="{!AP.Completed_Date__c}" /> 
                                              </apex:outputText>                                
                                              </td>
                                          </tr> 
                                          <tr>
                                              <td colspan="3">
                                                  <h4>{!$ObjectType.General_Sub_Task__c.Fields.Completion_Comments__c.Label}:</h4>
                                                  <p> 
                                                     {!AP.Completion_Comments__c}
                                                  </p>
                                              </td>
                                          </tr>
                                          
                                      </tbody>
                                    </table>    
                                  </apex:repeat>
                             <apex:outputPanel rendered="{!OR(implementation.New_Due_Date__c!=null,implementation.New_Owner__c!=null)}">
                            <h2>Approvers For Change <apex:outputText value="{!if(implementation.New_Due_Date__c!=null,' Due Date',' Owner')}"></apex:outputText></h2>
                            <table class="table table-responsive table-bordered">
                                <tbody>
                                    <tr>
                                        <th><apex:outputText value="{!if(implementation.New_Due_Date__c!=null,' Due Date',' Owner')}"></apex:outputText></th>
                                        <th><apex:outputText value="{!if(Implementation.New_Due_Date__c!=null,'New Due Date','New Owner')}"></apex:outputText></th>
                                    </tr>
                                    <tr>
                                        <td>  
                                            <apex:outputPanel rendered="{!implementation.New_Due_Date__c!=null}">
                                                <apex:outputText value="{0,date,dd MMM yyyy}">
                                                    <apex:param value="{!implementation.Due_Date__c}" /> 
                                                </apex:outputText> 
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!implementation.New_Due_Date__c==null}">
                                                <apex:outputText value="{!implementation.Owner.Name}"></apex:outputText>
                                            </apex:outputPanel>                                            
                                            
                                            
                                        </td>
                                        <td>
                                            <apex:outputPanel rendered="{!implementation.New_Due_Date__c!=null}">
                                                <apex:outputText value="{0,date,dd MMM yyyy}">
                                                    <apex:param value="{!implementation.New_Due_Date__c}" /> 
                                                </apex:outputText> 
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!implementation.New_Due_Date__c==null}">
                                                <apex:outputText value="{!implementation.New_Owner__r.Name}"></apex:outputText>
                                            </apex:outputPanel>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <table class="table table-responsive table-bordered">
                                <tbody>
                                    <tr>
                                        <th>Approver</th>
                                        <th>Status</th>
                                        <th>Approved Date</th>
                                    </tr>
                                    
                                    <apex:repeat value="{!implementationChangeProcess}" var="pi">
                                       
                                            <apex:repeat value="{!pi.Workitems}" var="ps"> <tr>
                                                <td>{!User[ps.OriginalActorid].Name}</td>
                                                <td>started</td>
                                                <td>
                                                    <apex:outputText value="{0,date,dd MMM yyyy}">
                                                        <apex:param value="{!ps.CreatedDate}" /> 
                                                    </apex:outputText> 
                                                </td>     </tr>                                       
                                            </apex:repeat>
                                        
                                        
                                            <apex:variable value="{!0}" var="submitter"/>
                                            <apex:repeat value="{!pi.Steps}" var="ps">
                                                   <apex:variable value="{!submitter+1}" var="submitter"/>
                                                    <apex:outputPanel rendered="{!submitter>1}" >
                                                    <tr>
                                                    <td>{!User[ps.OriginalActorid].Name}</td>
                                                    <td>{!ps.StepStatus}</td>
                                                    <td>
                                                        <apex:outputText value="{0,date,dd MMM yyyy}">
                                                            <apex:param value="{!ps.CreatedDate}" /> 
                                                        </apex:outputText> 
                                                    </td>  
                                                </tr>
                                                </apex:outputPanel>                                        
                                            </apex:repeat>
                                       
                                    </apex:repeat>
                                    
                                </tbody>
                            </table>
                        </apex:outputPanel>   
                             
                          
                               

                              <apex:outputPanel rendered="true">
                                  <h2>Approvers</h2>
                                  <table class="table table-responsive table-bordered">
                                      <tbody>
                                          <tr>
                                              <th>Type</th>
                                              <th>Approver</th>
                                              <th>Sequence</th>
                                              <th>Allowed Days</th>
                                              <th>Due Date</th>
                                              <th>Status</th>
                                              <th>Approved Date</th>
                                          </tr>
                                          <apex:repeat value="{!implementationApprovers}" var="Ap">
                                              <tr>
                                                  <td>{!Ap.Approver_Name__c}</td>
                                                  <td>{!Ap.Approver_Name__c}</td>
                                                  <td>{!Ap.Sequence_Position__c}</td>
                                                  <td>{!Ap.Allowed_Days__c}</td>
                                                  <td>
                                                      <apex:outputText value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!Ap.Due_Date__c}" /> 
                                                      </apex:outputText>                                  
                                                  </td>
                                                  <td>{!Ap.Status__c}</td>
                                                  <td>
                                                      <apex:outputText value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!Ap.Status_Updated__c}" /> 
                                                      </apex:outputText>                                      
                                                  </td>
                                              </tr>                                
                                          </apex:repeat>
                                          
                                      </tbody>
                                  </table>
                              </apex:outputPanel>
                              

                          </div>
                        </div>
                      </div>
              <!------------------------print only--------------------------------->
            <div class="print-only">
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="headingOne">
                        <h4 class="panel-title"><h1>  Implementation - {!implementationTask.Owner__r.Name} |  &nbsp;
                                  <apex:outputText value="{0,date,dd MMM yyyy}">
                                      <apex:param value="{!implementation.Due_Date__c}" /> 
                                  </apex:outputText>
                              {!implementationApprovers.size+actionPlans.Size}</h1></h4>
                                  <apex:repeat value="{!actionPlans}" var="AP">
                              <table class="table table-responsive table-bordered">                                      
                                      <tbody>
                                          
                                          <tr>
                                              <td colspan="3">
                                                  <h4>{!AP.Type__c}</h4>
                                              </td>
                                          </tr>
                                          
                                          
                                          <tr>
                                              <th>{!$ObjectType.General_Sub_Task__c.Fields.Assigned_User__c.Label}</th>
                                              <th>{!$ObjectType.General_Sub_Task__c.Fields.Due_Date__c.Label}</th>
                                              <th>{!$ObjectType.General_Sub_Task__c.Fields.Action_Plan_Status__c.Label}</th>
                                          </tr>
                                          
                                          <tr>
                                              <td>{!AP.Assigned_User__r.Name}</td>
                                              <td>
                                                  <apex:outputText value="{0,date,dd MMM yyyy}">
                                                      <apex:param value="{!AP.Due_Date__c}" /> 
                                                  </apex:outputText>                                                  
                                              </td>
                                              <td>{!AP.Action_Plan_Status__c}</td>
                                          </tr>
                                          
                                          <tr>
                                              <td colspan="3">
                                                  <h4>{!$ObjectType.General_Sub_Task__c.Fields.Title__c.Label}</h4>
                                                  <p>
                                                    {!AP.Title__c}
                                                  </p>
                                              </td>
                                          </tr>
                                          
                                          <tr>
                                              <td colspan="3">
                                                  <h4> {!$ObjectType.General_Sub_Task__c.Fields.Associated_Root_Causes__c.Label}</h4>
                                                  <p>
                                                      {!AP.Associated_Root_Cause_Name__c}
                                                  </p>
                                              </td>
                                          </tr>
                                          
                                          <tr>
                                              <td colspan="3">
                                                  {!$ObjectType.General_Sub_Task__c.Fields.Completed_By__c.Label}: {!AP.Completed_By__r.Name}
                                              </td>
                                          </tr>
                                          
                                          <tr>
                                              <td colspan="3">
                                                  <h4>{!$ObjectType.General_Sub_Task__c.Fields.Completion_Comments__c.Label}:</h4>
                                                  <p> 
                                                     {!AP.Completion_Comments__c}
                                                  </p>
                                              </td>
                                          </tr>
                                          
                                      </tbody>
                                    </table>    
                                  </apex:repeat>


                        <apex:outputPanel rendered="true">
                                  <h2>Approvers</h2>
                                  <table class="table table-responsive table-bordered">
                                      <tbody>
                                          <tr>
                                              <th>Approver</th>
                                              <th>Sequence</th>
                                              <th>Allowed Days</th>
                                              <th>Due Date</th>
                                              <th>Status</th>
                                              <th>Approved Date</th>
                                          </tr>
                                          <apex:repeat value="{!implementationApprovers}" var="Ap">
                                              <tr>
                                                  <td>{!Ap.Approver_Name__c}</td>
                                                  <td>{!Ap.Sequence_Position__c}</td>
                                                  <td>{!Ap.Allowed_Days__c}</td>
                                                  <td>
                                                      <apex:outputText value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!Ap.Due_Date__c}" /> 
                                                      </apex:outputText>                                  
                                                  </td>
                                                  <td>{!Ap.Status__c}</td>
                                                  <td>
                                                      <apex:outputText value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!Ap.Status_Updated__c}" /> 
                                                      </apex:outputText>                                      
                                                  </td>
                                              </tr>                                
                                          </apex:repeat>
                                          
                                      </tbody>
                                  </table>    
                        </apex:outputPanel>
                    </div>
                </div>
            </div>

 </apex:outputPanel>
 <apex:outputPanel rendered="{!NOT(ISBLANK(effectivenessReviewTask))}">
       <div class="panel panel-default screen-only">
                        <div class="panel-heading" role="tab" id="headingOne">
                          <h4 class="panel-title">
                            <a class="btn btn-link btn-xs pull-right" data-toggle="collapse" data-parent="#accordionER" href="#erDetails" aria-expanded="true" aria-controls="erDetails"><span class="glyphicon glyphicon-chevron-down" aria-hidden="true"></span>
                            
                            </a><a class="" data-toggle="collapse" data-parent="#accordionER" href="#erDetails" aria-expanded="true" aria-controls="erDetails">
                              Effetiveness Review - {!effectivenessReviewTask.Owner__r.Name} |  &nbsp;
                                  <apex:outputText value="{0,date,dd MMM yyyy}">
                                      <apex:param value="{!effectivenessReviewTask.Due_Date__c}" /> 
                                  </apex:outputText>
                              <span class="badge red-badge">{!verificationPlans.size+effectivenessReviewApprovers.Size}</span>
                            </a>
                          </h4>
                        </div>
                        <div aria-expanded="true" style="" id="erDetails" class="panel-collapse out collapse out" role="tabpanel" aria-labelledby="headingOne">
                          <div class="panel-body">
                              <h2>Verification Plans</h2>
                    
                               <table class="table table-responsive table-bordered">
                                   <apex:repeat value="{!verificationPlans}" var="EVP">
                                       <tbody>
                                           <tr>
                                               <td class="title-col">
                                                   {!$ObjectType.General_Sub_Task__c.Fields.Plan_Statement__c.Label}:
                                               </td>
                                               <td>
                                                   <apex:outputField value="{!EVP.Plan_Statement__c}"/>
                                               </td>
                                           </tr>
                                           
                                       </tbody>                                                                
                                   </apex:repeat>
                               </table>
                               <h2>Effectiveness Review Details</h2> 
                
                            <table class="table table-responsive table-bordered">
                                <tbody>
                                    
                                    <tr>
                                        <td class="title-col">
                                            Object Evidence:
                                        </td>
                                        <td>
                                            <apex:outputfield value="{!effectivenessReviewTask.Objective_Evidence__c}"/>
                                        </td>
                                    </tr>
                                    
                                    <tr>
                                        <td class="title-col" style="width: 20%">
                                            Completed By: 
                                        </td>
                                        <td>
                                            {!JSENCODE(effectivenessReviewTask.Completed_By_Name__c)} 
                                        </td>
                                    </tr>
                                    
                                    <tr>
                                        <td class="title-col" style="width: 20%">
                                             Completed Date:  
                                        </td>
                                        <td>
                                            <apex:outputText value="{0,date,dd MMM yyyy}">
                                                <apex:param value="{!effectivenessReviewTask.Completed_Date__c}" /> 
                                            </apex:outputText>                                
                                        </td>
                                    </tr> 
                                </tbody>
                            </table>
    
                             <apex:outputPanel rendered="{!OR(effectivenessReviewTask.New_Due_Date__c!=null,effectivenessReviewTask.New_Owner__c!=null)}">
                            <h2>Approvers For Change <apex:outputText value="{!if(effectivenessReviewTask.New_Due_Date__c!=null,' Due Date',' Owner')}"></apex:outputText></h2>
                            <table class="table table-responsive table-bordered">
                                <tbody>
                                    <tr>
                                        <th><apex:outputText value="{!if(effectivenessReviewTask.New_Due_Date__c!=null,' Due Date',' Owner')}"></apex:outputText></th>
                                        <th><apex:outputText value="{!if(effectivenessReviewTask.New_Due_Date__c!=null,'New Due Date','New Owner')}"></apex:outputText></th>
                                    </tr>
                                    <tr>
                                        <td>  
                                            <apex:outputPanel rendered="{!effectivenessReviewTask.New_Due_Date__c!=null}">
                                                <apex:outputText value="{0,date,dd MMM yyyy}">
                                                    <apex:param value="{!effectivenessReviewTask.Due_Date__c}" /> 
                                                </apex:outputText> 
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!effectivenessReviewTask.New_Due_Date__c==null}">
                                                <apex:outputText value="{!effectivenessReviewTask.Owner.Name}"></apex:outputText>
                                            </apex:outputPanel>                                            
                                            
                                            
                                        </td>
                                        <td>
                                            <apex:outputPanel rendered="{!effectivenessReviewTask.New_Due_Date__c!=null}">
                                                <apex:outputText value="{0,date,dd MMM yyyy}">
                                                    <apex:param value="{!effectivenessReviewTask.New_Due_Date__c}" /> 
                                                </apex:outputText> 
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!effectivenessReviewTask.New_Due_Date__c==null}">
                                                <apex:outputText value="{!effectivenessReviewTask.New_Owner__r.Name}"></apex:outputText>
                                            </apex:outputPanel>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <table class="table table-responsive table-bordered">
                                <tbody>
                                    <tr>
                                        <th>Approver</th>
                                        <th>Status</th>
                                        <th>Approved Date</th>
                                    </tr>
                                    
                                    <apex:repeat value="{!effectivenessReviewChangeProcess}" var="pi">
                                       
                                            <apex:repeat value="{!pi.Workitems}" var="ps"> <tr>
                                                <td>{!User[ps.OriginalActorid].Name}</td>
                                                <td>started</td>
                                                <td>
                                                    <apex:outputText value="{0,date,dd MMM yyyy}">
                                                        <apex:param value="{!ps.CreatedDate}" /> 
                                                    </apex:outputText> 
                                                </td>     </tr>                                       
                                            </apex:repeat>
                                        
                                        
                                            <apex:variable value="{!0}" var="submitter"/>
                                            <apex:repeat value="{!pi.Steps}" var="ps">
                                                   <apex:variable value="{!submitter+1}" var="submitter"/>
                                                    <apex:outputPanel rendered="{!submitter>1}" >
                                                    <tr>
                                                    <td>{!User[ps.OriginalActorid].Name}</td>
                                                    <td>{!ps.StepStatus}</td>
                                                    <td>
                                                        <apex:outputText value="{0,date,dd MMM yyyy}">
                                                            <apex:param value="{!ps.CreatedDate}" /> 
                                                        </apex:outputText> 
                                                    </td>  
                                                </tr>
                                                </apex:outputPanel>                                        
                                            </apex:repeat>
                                       
                                    </apex:repeat>
                                    
                                </tbody>
                            </table>
                        </apex:outputPanel>   
                             
                          
                               

                              <apex:outputPanel rendered="true">
                                  <h2>Approvers</h2>
                                  <table class="table table-responsive table-bordered">
                                      <tbody>
                                          <tr>
                                              <th>Type</th>
                                              <th>Approver</th>
                                              <th>Sequence</th>
                                              <th>Allowed Days</th>
                                              <th>Due Date</th>
                                              <th>Status</th>
                                              <th>Approved Date</th>
                                          </tr>
                                          <apex:repeat value="{!effectivenessReviewApprovers}" var="Ap">
                                              <tr>
                                                  <td>{!Ap.Approver_Name__c}</td>
                                                  <td>{!Ap.Approver_Name__c}</td>
                                                  <td>{!Ap.Sequence_Position__c}</td>
                                                  <td>{!Ap.Allowed_Days__c}</td>
                                                  <td>
                                                      <apex:outputText value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!Ap.Due_Date__c}" /> 
                                                      </apex:outputText>                                  
                                                  </td>
                                                  <td>{!Ap.Status__c}</td>
                                                  <td>
                                                      <apex:outputText value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!Ap.Status_Updated__c}" /> 
                                                      </apex:outputText>                                      
                                                  </td>
                                              </tr>                                
                                          </apex:repeat>
                                          
                                      </tbody>
                                  </table>
                              </apex:outputPanel>
                              

                          </div>
                        </div>
                      </div>
              <!------------------------print only--------------------------------->
            <div class="print-only">
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="headingOne">
                        <h4 class="panel-title"><h1>  Effectiveness Review - {!effectivenessReviewTask.Owner__r.Name} |  &nbsp;
                                  <apex:outputText value="{0,date,dd MMM yyyy}">
                                      <apex:param value="{!implementation.Due_Date__c}" /> 
                                  </apex:outputText>
                              {!effectivenessReviewApprovers.size+verificationPlans.Size}</h1></h4>
                                  <h2>Verification Plans</h2>
                    
                    <table class="table table-responsive table-bordered">
                        <apex:repeat value="{!verificationPlans}" var="EVP">
                            <tbody>
                                <tr>
                                    <td class="title-col">
                                        {!$ObjectType.General_Sub_Task__c.Fields.Plan_Statement__c.Label}:
                                    </td>
                                    <td>
                                        {!JSENCODE(EVP.Plan_Statement__c)}
                                    </td>
                                </tr>
                                
                            </tbody>                                                                
                        </apex:repeat>
                    </table>
                    
               <h2>Effectiveness Review Details</h2> 
                
                <table class="table table-responsive table-bordered">
                    <tbody>
                        
                        <tr>
                            <td class="title-col">
                                Object Evidence:
                            </td>
                            <td>
                                {!JSENCODE(effectivenessReviewTask.Objective_Evidence__c)}
                            </td>
                        </tr>
                        
                        <tr>
                            <td class="title-col" style="width: 20%">
                                Completed By: 
                            </td>
                            <td>
                                {!JSENCODE(effectivenessReviewTask.Completed_By_Name__c)}
                            </td>
                        </tr>
                        
                        <tr>
                            <td class="title-col" style="width: 20%">
                                 Completed Date:  
                            </td>
                            <td>
                                <apex:outputText value="{0,date,dd MMM yyyy}">
                                    <apex:param value="{!effectivenessReviewTask.Completed_Date__c}" /> 
                                </apex:outputText>                                
                            </td>
                        </tr> 
                    </tbody>
                </table>
                <apex:outputPanel rendered="{!OR(effectivenessReviewTask.New_Due_Date__c!=null,effectivenessReviewTask.New_Owner__c!=null)}">
                    <h2>Approvers For Change <apex:outputText value="{!if(effectivenessReviewTask.New_Due_Date__c!=null,' Due Date',' Owner')}"></apex:outputText></h2>
                    <table class="table table-responsive table-bordered">
                                <tbody>
                                    <tr>
                                        <th><apex:outputText value="{!if(effectivenessReviewTask.New_Due_Date__c!=null,' Due Date',' Owner')}"></apex:outputText></th>
                                        <th><apex:outputText value="{!if(effectivenessReviewTask.New_Due_Date__c!=null,'New Due Date','New Owner')}"></apex:outputText></th>
                                    </tr>
                                    <tr>
                                        <td>  
                                            <apex:outputPanel rendered="{!effectivenessReviewTask.New_Due_Date__c!=null}">
                                                <apex:outputText value="{0,date,dd MMM yyyy}">
                                                    <apex:param value="{!effectivenessReviewTask.Due_Date__c}" /> 
                                                </apex:outputText> 
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!effectivenessReviewTask.New_Due_Date__c==null}">
                                                <apex:outputText value="{!JSENCODE(effectivenessReviewTask.Owner.Name)}"></apex:outputText>
                                            </apex:outputPanel>                                            
                                            
                                            
                                        </td>
                                        <td>
                                            <apex:outputPanel rendered="{!effectivenessReviewTask.New_Due_Date__c!=null}">
                                                <apex:outputText value="{0,date,dd MMM yyyy}">
                                                    <apex:param value="{!effectivenessReviewTask.New_Due_Date__c}" /> 
                                                </apex:outputText> 
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!effectivenessReviewTask.New_Due_Date__c==null}">
                                                <apex:outputText value="{!JSENCODE(effectivenessReviewTask.New_Owner__r.Name)}"></apex:outputText>
                                            </apex:outputPanel>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                    <table class="table table-responsive table-bordered">
                        <tbody>
                            <tr>
                                <th>Approver</th>
                                <th>Status</th>
                                <th>Approved Date</th>
                            </tr>
                            
                            <apex:repeat value="{!effectivenessReviewChangeProcess}" var="pi">
                                <tr>
                                    <apex:repeat value="{!pi.Workitems}" var="ps">
                                        <td>{!User[ps.OriginalActorid].Name}</td>
                                        <td>started</td>
                                        <td>
                                            <apex:outputText value="{0,date,dd MMM yyyy}">
                                                <apex:param value="{!ps.CreatedDate}" /> 
                                            </apex:outputText> 
                                            
                                        </td>                                            
                                    </apex:repeat>
                                </tr>
                                <tr>
                                    <apex:variable value="{!0}" var="submitter"/>
                                    <apex:repeat rendered="{!submitter!=0}" value="{!pi.Steps}" var="ps">
                                        <apex:variable value="{!submitter+1}" var="submitter"/>
                                        <td>{!User[ps.OriginalActorid].Name}</td>
                                        <td>{!ps.StepStatus}</td>
                                        <td>
                                            <apex:outputText value="{0,date,dd MMM yyyy}">
                                                <apex:param value="{!ps.CreatedDate}" /> 
                                            </apex:outputText> 
                                        </td>  

                                    </apex:repeat>
                                </tr>
                            </apex:repeat>
                            
                        </tbody>
                    </table>
                </apex:outputPanel>   
                
                <apex:outputPanel rendered="true">
                                <h2>Approvers</h2>
                                <table class="table table-responsive table-bordered">
                                    <tbody>
                                        <tr>
                                            <th>Approver</th>
                                            <th>Sequence</th>
                                            <th>Allowed Days</th>
                                            <th>Due Date</th>
                                            <th>Status</th>
                                            <th>Approved Date</th>
                                        </tr>
                                        <apex:repeat value="{!effectivenessReviewApprovers}" var="Ap">
                                            <tr>
                                                <td>{!Ap.Approver_Name__c}</td>
                                                <td>{!Ap.Sequence_Position__c}</td>
                                                <td>{!Ap.Allowed_Days__c}</td>
                                                <td>
                                                    <apex:outputText value="{0,date,dd MMM yyyy}">
                                                        <apex:param value="{!Ap.Due_Date__c}" /> 
                                                    </apex:outputText>                                  
                                                </td>
                                                <td>{!Ap.Status__c}</td>
                                                <td>
                                                    <apex:outputText value="{0,date,dd MMM yyyy}">
                                                        <apex:param value="{!Ap.Status_Updated__c}" /> 
                                                    </apex:outputText>                                      
                                                </td>
                                            </tr>                                
                                        </apex:repeat>
                                        
                                    </tbody>
                                </table>    
                      </apex:outputPanel>
                    </div>
                </div>
            </div>

 </apex:outputPanel>
 
 <apex:outputPanel rendered="{!NOT(ISNULL(adhocTasks))}">
       <apex:repeat value="{!adhocTasks}" var="adhoc">
                      
                      <div class="panel panel-default screen-only">
                        <div class="panel-heading" role="tab" id="headingOne">
                          <h4 class="panel-title">
                            <a class="btn btn-link btn-xs pull-right" data-toggle="collapse" data-parent="#accordionAdhoc_Action" href="#Adhoc_Action{!Adhoc.id}" aria-expanded="true" aria-controls="Adhoc_Action"><span class="glyphicon glyphicon-chevron-down" aria-hidden="true"></span>
                            
                            </a><a class="" data-toggle="collapse" data-parent="#accordionAdhoc_Action" href="#Adhoc_Action{!Adhoc.id}" aria-expanded="true" aria-controls="Adhoc_Action">
                              Adhoc<span class="badge red-badge"></span>
                            </a>
                          </h4>
                        </div>
                        
                        <div aria-expanded="true" style="" id="Adhoc_Action{!Adhoc.id}" class="panel-collapse out collapse out" role="tabpanel" aria-labelledby="headingOne">
                          <div class="panel-body">
                            <h2><b>Title: </b>  <apex:outputText value="{!Adhoc.AdhocTask_Title__c}"></apex:outputText></h2>
                              <apex:outputPanel rendered="true">
                                  <table class="table table-responsive table-bordered">
                                      <tbody>
                                          <tr>
                                              <th>Completed By</th>
                                              <th>{!$ObjectType.General_Sub_Task__c.Fields.Completed_Date__c.Label}:</th>
                                              <th>AdhocDetails</th>
                                          </tr>
                                          
                                          <apex:repeat value="{!adhocActions[adhoc.Id]}" var="CA">
                                          <tr>
                                              <td>{!CA.Completed_By__r.Name}</td>
                                              <td>
                                                  <apex:outputText value="{0,date,dd MMM yyyy}">
                                                      <apex:param value="{!CA.Completed_Date__c}" /> 
                                                  </apex:outputText>
                                              </td>
                                              <td>{!CA.Sub_Task_Detail__c}</td>
                                          </tr>                                           
                                          </apex:repeat>                                                    
                                      </tbody>
                                  </table>
                              </apex:outputPanel>
                              <!--=======================================-->
                <apex:outputPanel rendered="{!OR(Adhoc.New_Due_Date__c!=null,Adhoc.New_Owner__c!=null)}">
                    <h2>Approvers For Change <apex:outputText value="{!if(Adhoc.New_Due_Date__c!=null,' Due Date',' Owner')}"></apex:outputText></h2>
                    <table class="table table-responsive table-bordered">
                                <tbody>
                                    <tr>
                                        <th><apex:outputText value="{!if(Adhoc.New_Due_Date__c!=null,' Due Date',' Owner')}"></apex:outputText></th>
                                        <th><apex:outputText value="{!if(Adhoc.New_Due_Date__c!=null,'New Due Date','New Owner')}"></apex:outputText></th>
                                    </tr>
                                    <tr>
                                        <td>  
                                            <apex:outputPanel rendered="{!Adhoc.New_Due_Date__c!=null}">
                                                <apex:outputText value="{0,date,dd MMM yyyy}">
                                                    <apex:param value="{!Adhoc.Due_Date__c}" /> 
                                                </apex:outputText> 
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!Adhoc.New_Due_Date__c==null}">
                                                <apex:outputText value="{!Adhoc.Owner.Name}"></apex:outputText>
                                            </apex:outputPanel>                                            
                                            
                                            
                                        </td>
                                        <td>
                                            <apex:outputPanel rendered="{!Adhoc.New_Due_Date__c!=null}">
                                                <apex:outputText value="{0,date,dd MMM yyyy}">
                                                    <apex:param value="{!Adhoc.New_Due_Date__c}" /> 
                                                </apex:outputText> 
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!Adhoc.New_Due_Date__c==null}">
                                                <apex:outputText value="{!Adhoc.New_Owner__r.Name}"></apex:outputText>
                                            </apex:outputPanel>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                    <table class="table table-responsive table-bordered">
                        <tbody>
                            <tr>
                                <th>Approver</th>
                                <th>Status</th>
                                <th>Approved Date</th> 
                            </tr>
                            
                            <apex:repeat rendered="true" value="{!adhocChangeProcess[adhoc.Id]}" var="pi">
                                
                                    <apex:repeat value="{!pi.Workitems}" var="processStep">
                                    <tr>
                                        <td>{!User[processStep.OriginalActorid].Name}</td>
                                        <td>started</td>
                                        <td>
                                            <apex:outputText value="{0,date,dd MMM yyyy}">
                                                <apex:param value="{!processStep.CreatedDate}" /> 
                                            </apex:outputText> 
                                            
                                        </td>  
                                   </tr>                                          
                                    </apex:repeat>
                                
                               
                                    <apex:variable value="{!0}" var="submitter"/>
                                    
                                    <apex:repeat value="{!pi.Steps}" var="processStep"> 
                                        <apex:variable value="{!submitter+1}" var="submitter"/>
                                        <apex:outputPanel rendered="{!submitter>1}" >
                                        <tr>
                                        <td>{!User[processStep.OriginalActorid].Name}</td>
                                        <td>{!processStep.StepStatus}</td>
                                        <td>
                                            <apex:outputText value="{0,date,dd MMM yyyy}">
                                                <apex:param value="{!processStep.CreatedDate}" /> 
                                            </apex:outputText> 
                                        </td> 
                                    </tr>
                                    </apex:outputPanel>
                                    </apex:repeat>
                                
                            </apex:repeat>
                            
                        </tbody>
                    </table>
                </apex:outputPanel>   
                <!--=======================================--> 
                              
                              <apex:outputPanel rendered="true">
                                  <h2>Approvers</h2>
                                  <table class="table table-responsive table-bordered">
                                      <tbody>
                                          <tr>
                                              <th>Approver</th>
                                              <th>Sequence</th>
                                              <th>Allowed Days</th>
                                              <th>Due Date</th>
                                              <th>Status</th>
                                              <th>Approved Date</th>
                                          </tr>
                                          <apex:repeat value="{!adhocApprovers[adhoc.Id]}" var="approver">
                                              <tr>
                                                  <td>{!approver.User__r.Name}</td>
                                                  <td>{!approver.Sequence_Position__c}</td>
                                                  <td>{!approver.Allowed_Days__c}</td>
                                                  <td>
                                                      <apex:outputText value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!approver.Due_Date__c}" /> 
                                                      </apex:outputText>                                  
                                                  </td>
                                                  <td>{!approver.Status__c}</td>
                                                  <td>
                                                      <apex:outputText value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!approver.Status_Updated__c}" /> 
                                                      </apex:outputText>                                      
                                                  </td>
                                              </tr>                                
                                          </apex:repeat>
                                          
                                      </tbody>
                                  </table>
                              </apex:outputPanel>
                          </div>
                        </div>
                      </div>
                      <!--============================================================================print only-->
            <div class="print-only">
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="headingOne">
                        <h4 class="panel-title"><h1>Adhoc</h1></h4>
                        <apex:outputPanel rendered="true">
                                  <table class="table table-responsive table-bordered">
                                      <tbody>
                                          <tr>
                                              <th>AdhocAction</th>
                                              <th>Completed By</th>
                                              <th>Completed Date</th>
                                              <th>AdhocDetails</th>
                                          </tr>
                                          <apex:repeat value="{!adhocActions[adhoc.Id]}" var="CA">
                                          <tr>
                                              <td>{!Left(CA.Sub_Task_Detail__c,25)}</td>
                                              <td>{!CA.Completed_By__r.Name}</td>
                                              <td>
                                                  <apex:outputText value="{0,date,dd MMM yyyy}">
                                                      <apex:param value="{!CA.Completed_Date__c}" /> 
                                                  </apex:outputText>
                                              </td>
                                              <td>{!CA.Sub_Task_Detail__c}</td>
                                          </tr>                                           
                                          </apex:repeat>                                                     
                                      </tbody>
                                  </table>
                              </apex:outputPanel>
                        
                        <!--=======================================-->
                        <apex:outputPanel rendered="{!OR(Adhoc.New_Due_Date__c!=null,Adhoc.New_Owner__c!=null)}">
                            <h2>Approvers For Change <apex:outputText value="{!if(Adhoc.New_Due_Date__c!=null,' Due Date',' Owner')}"></apex:outputText></h2>
                            <table class="table table-responsive table-bordered">
                                <tbody>
                                    <tr>
                                        <th><apex:outputText value="{!if(Adhoc.New_Due_Date__c!=null,' Due Date',' Owner')}"></apex:outputText></th>
                                        <th><apex:outputText value="{!if(Adhoc.New_Due_Date__c!=null,'New Due Date','New Owner')}"></apex:outputText></th>
                                    </tr>
                                    <tr>
                                        <td>  
                                            <apex:outputPanel rendered="{!Adhoc.New_Due_Date__c!=null}">
                                                <apex:outputText value="{0,date,dd MMM yyyy}">
                                                    <apex:param value="{!Adhoc.Due_Date__c}" /> 
                                                </apex:outputText> 
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!Adhoc.New_Due_Date__c==null}">
                                                <apex:outputText value="{!Adhoc.Owner.Name}"></apex:outputText>
                                            </apex:outputPanel>                                            
                                            
                                            
                                        </td>
                                        <td>
                                            <apex:outputPanel rendered="{!Adhoc.New_Due_Date__c!=null}">
                                                <apex:outputText value="{0,date,dd MMM yyyy}">
                                                    <apex:param value="{!Adhoc.New_Due_Date__c}" /> 
                                                </apex:outputText> 
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!Adhoc.New_Due_Date__c==null}">
                                                <apex:outputText value="{!Adhoc.New_Owner__r.Name}"></apex:outputText> 
                                            </apex:outputPanel>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                <!--=======================================-->
                <apex:outputPanel rendered="{!OR(Adhoc.New_Due_Date__c!=null,Adhoc.New_Owner__c!=null)}">
                    <h2>Approvers For Change <apex:outputText value="{!if(Adhoc.New_Due_Date__c!=null,' Due Date',' Owner')}"></apex:outputText></h2>
                    <table class="table table-responsive table-bordered">
                                <tbody>
                                    <tr>
                                        <th><apex:outputText value="{!if(Adhoc.New_Due_Date__c!=null,' Due Date',' Owner')}"></apex:outputText></th>
                                        <th><apex:outputText value="{!if(Adhoc.New_Due_Date__c!=null,'New Due Date','New Owner')}"></apex:outputText></th>
                                    </tr>
                                    <tr>
                                        <td>  
                                            <apex:outputPanel rendered="{!Adhoc.New_Due_Date__c!=null}">
                                                <apex:outputText value="{0,date,dd MMM yyyy}">
                                                    <apex:param value="{!Adhoc.Due_Date__c}" /> 
                                                </apex:outputText> 
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!Adhoc.New_Due_Date__c==null}">
                                                <apex:outputText value="{!Adhoc.Owner.Name}"></apex:outputText>
                                            </apex:outputPanel>                                            
                                            
                                            
                                        </td>
                                        <td>
                                            <apex:outputPanel rendered="{!Adhoc.New_Due_Date__c!=null}">
                                                <apex:outputText value="{0,date,dd MMM yyyy}">
                                                    <apex:param value="{!Adhoc.New_Due_Date__c}" /> 
                                                </apex:outputText> 
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!Adhoc.New_Due_Date__c==null}">
                                                <apex:outputText value="{!Adhoc.New_Owner__r.Name}"></apex:outputText>
                                            </apex:outputPanel>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                    <table class="table table-responsive table-bordered">
                        <tbody>
                            <tr>
                                <th>Approver</th>
                                <th>Status</th>
                                <!--<th>Approved Date</th> -->
                            </tr>
                            
                            <apex:repeat value="{!adhocChangeProcess[adhoc.Id]}" var="pi">
                                <tr>
                                    <apex:repeat value="{!pi.Workitems}" var="processStep">
                                        <td>{!User[processStep.OriginalActorid].Name}</td>
                                        <td>started</td>
                                        <td>
                                            <apex:outputText value="{0,date,dd MMM yyyy}">
                                                <apex:param value="{!processStep.CreatedDate}" /> 
                                            </apex:outputText> 
                                            
                                        </td>                                            
                                    </apex:repeat>
                                </tr>
                                <tr>
                                    <apex:variable value="{!0}" var="submitter"/>
                                    <apex:repeat rendered="{!submitter!=0}" value="{!pi.Steps}" var="processStep">
                                        <apex:variable value="{!submitter+1}" var="submitter"/>
                                        <td>{!User[processStep.OriginalActorid].Name}</td>
                                        <td>{!processStep.StepStatus}</td>
                                        <td>
                                            <apex:outputText value="{0,date,dd MMM yyyy}">
                                                <apex:param value="{!processStep.CreatedDate}" /> 
                                            </apex:outputText> 
                                        </td>  

                                    </apex:repeat>
                                </tr>
                            </apex:repeat>
                            
                        </tbody>
                    </table>
                </apex:outputPanel>   
                <!--=======================================-->                            
                            
                            
                            <table class="table table-responsive table-bordered">
                                <tbody>
                                    <tr>
                                        <th>Approver</th>
                                        <th>Status</th>
                                        <!-- <th>Approved Date</th> -->
                                    </tr>
                                    
                                    <apex:repeat value="{!adhocChangeProcess[adhoc.Id]}" var="pi">
                                        
                                            <apex:repeat value="{!pi.Workitems}" var="processStep"><tr>
                                                <td>{!User[processStep.OriginalActorid].Name}</td>
                                                <td>started</td>
                                                <td>
                                                    <apex:outputText value="{0,date,dd MMM yyyy}">
                                                        <apex:param value="{!processStep.CreatedDate}" /> 
                                                    </apex:outputText> 
                                                </td>                                            </tr>                                       
                                            </apex:repeat>

                                        
                                            <apex:variable value="{!0}" var="submitter"/>
                                      <apex:repeat value="{!pi.Steps}" var="processStep">
                                                   <apex:variable value="{!submitter+1}" var="submitter"/>
                                                    <apex:outputPanel rendered="{!submitter>1}" >
                                                    <tr>
                                                    <td>{!User[processStep.OriginalActorid].Name}</td>
                                                    <td>{!processStep.StepStatus}</td>
                                                     <td>
                                                        <apex:outputText value="{0,date,dd MMM yyyy}">
                                                            <apex:param value="{!processStep.CreatedDate}" /> 
                                                        </apex:outputText> 
                                                    </td>  
                                                </tr>
                                                </apex:outputPanel>                                           
                                            </apex:repeat>
                                       
                                    </apex:repeat>
                                    
                                </tbody>
                            </table>
                        </apex:outputPanel>   
                        <!--=======================================-->
                        <apex:outputPanel rendered="true">
                            <h2>Approvers</h2>
                                  <table class="table table-responsive table-bordered">
                                      <tbody>
                                          <tr>
                                              <th>Approver</th>
                                              <th>Sequence</th> 
                                              <th>Allowed Days</th>
                                              <th>Due Date</th>
                                              <th>Status</th>
                                              <th>Approved Date</th>
                                          </tr>
                                          <apex:repeat value="{!adhocApprovers[adhoc.Id]}" var="approver">
                                              <tr>
                                                  <td>{!approver.Approver_Name__c}</td>
                                                  <td>{!approver.Sequence_Position__c}</td> 
                                                  <td>{!approver.Allowed_Days__c}</td>
                                                  <td>
                                                      <apex:outputText value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!approver.Due_Date__c}" /> 
                                                      </apex:outputText>                                  
                                                  </td> 
                                                  <td>{!approver.Status__c}</td>
                                                  <td>
                                                      <apex:outputText value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!approver.Status_Updated__c}" /> 
                                                      </apex:outputText>                                      
                                                  </td>
                                              </tr>                                
                                          </apex:repeat>
                                          
                                      </tbody>
                                  </table>    
                        </apex:outputPanel>
                    </div>
                </div>
            </div>
       </apex:repeat>
 </apex:outputPanel>
 
 <!--v1.1 start For CR Details -->
<apex:outputPanel rendered="{!NOT(ISNULL(DocumentChangeTask))}">
    <div class="panel panel-default screen-only">
        <div class="panel-heading" role="tab" id="headingOne">
            <h4 class="panel-title">
                <a class="btn btn-link btn-xs pull-right" data-toggle="collapse" data-parent="#accordionDocumentChangeTask" href="#DocumentChangeTask" aria-expanded="true" aria-controls="Containment_Action"><span class="glyphicon glyphicon-chevron-down" aria-hidden="true"></span>
                    
                </a><a class="" data-toggle="collapse" data-parent="#accordionDocumentChangeTask" href="#DocumentChangeTask" aria-expanded="true" aria-controls="DocumentChangeTask">
                DocumentChange <span class="badge red-badge">{!documentChangeApprovers.size}</span>
                </a>
            </h4>
        </div>
        <div aria-expanded="true" style="" id="DocumentChangeTask" class="panel-collapse out collapse out" role="tabpanel" aria-labelledby="headingOne">
            <div class="panel-body">
                <apex:outputPanel rendered="true">
                    <div >
                        <script>
                        function showChanges(id,hrefId){
                            var iClass = $(id).find('i').attr('class');
                            if(iClass == 'fa fa-plus'){
                                $(id).find('i').attr('class','fa fa-minus');
                                $('#'+hrefId).removeAttr('class');
                            }else{
                                $(id).find('i').attr('class','fa fa-plus');
                                $('#'+hrefId).attr('class','hidden');
                            }
                        }
                        
                        function showDocSpecificChanges(anchorElemid,hrefId){
                                var iElemClass = $(anchorElemid).find('i').attr('class');
                                if(iElemClass == 'fa fa-plus'){
                                //alert('inside the if startement'+iElemClass);
                                    $(anchorElemid).find('i').attr('class','fa fa-minus');
                                    $('#'+hrefId).removeAttr('class');
                                }else{
                                  // alert('inside the else statement ');
                                    $(anchorElemid).find('i').attr('class','fa fa-plus');
                                    $('#'+hrefId).attr('class','hidden');
                                }
                            }
                        </script>
                        
                        <!-- Table -->
                        <table class="table table-hover table-bordered">
                            <tbody>
                                <tr>
                                    <th>{!JSENCODE($ObjectType.Sub_Change_Management__c.Fields.Type__c.Label)}</th>
                                    <th width="30%">{!JSENCODE($ObjectType.Sub_Change_Management__c.Fields.Document_Profile__c.Label)} / {!JSENCODE($ObjectType.Sub_Change_Management__c.Fields.Document_Name__c.Label)}</th>
                                    <th>{!JSENCODE($ObjectType.Sub_Change_Management__c.Fields.Current_Rev__c.Label)}</th>
                                    <th>{!JSENCODE($ObjectType.Sub_Change_Management__c.Fields.New_Rev__c.Label)}</th>
                                    <th>{!JSENCODE($ObjectType.Sub_Change_Management__c.Fields.Status__c.Label)}</th>
                                    <th>{!JSENCODE($ObjectType.Sub_Change_Management__c.Fields.Relation__c.Label)}</th>
                                    <th>{!JSENCODE($ObjectType.Sub_Change_Management__c.Fields.Owner__c.Label)}</th>
                                    <th class="text-center">Actions</th>
                                    <th class="text-center">Act. Status</th>
                                </tr>
                                <apex:repeat value="{!documents}" var="docu">
                                            <tr class="text-v-center" id="docInfoRow1">
                                                <td id="docInfoRow1_Type">
                                                    <a role="button" href="#{!JSENCODE(docu.Id)}" id="{!JSENCODE(docu.Id)}_href" onclick="showChanges(this,'{!JSENCODE(docu.Id)}');">
                                                        <i class="fa fa-plus"></i>&nbsp;<apex:outputText value="{!docu.Type__c}"/>
                                                    </a>    
                                                </td>
                                                <td id="{!JSENCODE(docu.Id)}_Doc">
                                                    <apex:outputText value="{!if(docu.Type__c!='New',docu.Document_Profile_Name__c,docu.Document_Name__c)}" />
                                                </td>
                                                <td id="docInfoRow1_CurRev"><apex:outputText value="{!docu.Current_Rev__c}" /></td>
                                                <td id="docInfoRow1_NewRev"><apex:outputText value="{!docu.New_Rev__c}"/></td>
                                                <td id="docInfoRow1_Status"><apex:outputText value="{!docu.Status__c}"/></td>
                                                <td id="docInfoRow1_Relation"><apex:outputText value="{!docu.Relation__c}"/></td>
                                                <td id="docInfoRow1_Owner"><!--<apex:outputText value="{!docu.Owner__c}"/>--></td>
                                                <td class="text-center">
                                                    <button id="compactionbtn{!JSENCODE(docu.Id)}"  href="#" class="btn btn-{!IF(JSENCODE(docu.Type__c)=='New','success',IF(JSENCODE(docu.Type__c)=='Revise','primary','warning'))} btn-xs" disabled="true">
                                                    {!IF(JSENCODE(docu.Type__c)=='New','Create',JSENCODE(docu.Type__c))}</button>
                                                      
                                                </td>
                                                <td id="{!JSENCODE(docu.Id)}_tdCheck" class="text-center text-danger">
                                                    <i id="{!JSENCODE(docu.Id)}_iCheck" class="fa fa-folder-open"></i>
                                                    
                                                </td>
                                                
                                            </tr>
                                            <tr id="{!JSENCODE(docu.Id)}" class="hidden">
                                                <td colspan="9" id="docInfoRow2_Changes">
                                                    <p>
                                                        <apex:outputText value="{!docu.Document_Specific_Changes__c}"/>
                                                    </p>
                                                </td>
                                            </tr>
                                        </apex:repeat>
                                        <apex:repeat value="{!docs}" var="d">
                                            <tr>
                                                <td><a role="button" href="#{!JSENCODE(d.Id)}" id="{!JSENCODE(d.Id)}_href" onclick="showDocSpecificChanges(this,'{!JSENCODE(d.Id)}');">
                                                   <i class="fa fa-plus"></i>&nbsp;<apex:outputText value="{!JSENCODE(d.Type__c)}"/></a>
                                                </td>
                                                <td>{!JSENCODE(d.Name)}</td>
                                                <td>{!JSENCODE(d.Current_Rev__c)}</td>
                                                <td>{!JSENCODE(d.New_Rev__c)}</td>
                                                <td>{!JSENCODE(d.Status__c)}</td>
                                                <td>{!JSENCODE(d.Relation__c)}</td>
                                                <td>{!JSENCODE(d.Owner.Name)}</td>
                                                <td class="text-center">
                                                   <button id="compactionbtn{!JSENCODE(d.Id)}"  href="#" class="btn btn-{!IF(JSENCODE(d.Type__c)=='New','success',IF(JSENCODE(d.Type__c)=='Revise','primary','warning'))} btn-xs"
                                                    disabled="{!JSENCODE(d.Action_Status__c)=='Completed'}">{!IF(JSENCODE(d.Type__c)=='New','Create',JSENCODE(d.Type__c))}</button>
                                                </td>
                                                <td class="text-center text-{!IF(AND(JSENCODE(d.Action_Status__c)=='Completed'),'success','danger')}">
                                                    <i class="fa fa-{!IF(AND(JSENCODE(d.Action_Status__c)=='Completed'),'check-circle','folder-open')}" id="{!JSENCODE(d.Id)}image"></i>
                                                </td>
                                           </tr>
                                           <tr id="{!JSENCODE(d.Id)}" class="hidden">
                                                <td colspan="9" id="docspec1_Changes">
                                                    <p>
                                                        <apex:outputText value="{!d.Document_Specific_Changes__c}"/> 
                                                    </p>
                                                </td>
                                          </tr>
                                           
                                    </apex:repeat>
                            </tbody>
                        </table>
                    </div>
                </apex:outputPanel>
                
                <apex:outputPanel rendered="{!OR(documentChange.New_Due_Date__c!=null,documentChange.New_Owner__c!=null)}">
                    <h2>Approvers For Change <apex:outputText value="{!if(documentChange.New_Due_Date__c!=null,' Due Date',' Owner')}"></apex:outputText></h2>
                    <table class="table table-responsive table-bordered">
                        <tbody>
                            <tr>
                                <th><apex:outputText value="{!if(documentChange.New_Due_Date__c!=null,' Due Date',' Owner')}"></apex:outputText></th>
                                <th><apex:outputText value="{!if(documentChange.New_Due_Date__c!=null,'New Due Date','New Owner')}"></apex:outputText></th>
                            </tr>
                            <tr>
                                <td>  
                                    <apex:outputPanel rendered="{!documentChange.New_Due_Date__c!=null}">
                                        <apex:outputText value="{0,date,dd MMM yyyy}">
                                            <apex:param value="{!documentChange.Due_Date__c}" /> 
                                        </apex:outputText> 
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!documentChange.New_Due_Date__c==null}">
                                        <apex:outputText value="{!documentChange.Owner.Name}"></apex:outputText>
                                    </apex:outputPanel>                                            
                                    
                                    
                                </td>
                                <td>
                                    <apex:outputPanel rendered="{!documentChange.New_Due_Date__c!=null}">
                                        <apex:outputText value="{0,date,dd MMM yyyy}">
                                            <apex:param value="{!documentChange.New_Due_Date__c}" /> 
                                        </apex:outputText> 
                                    </apex:outputPanel>
                                    <apex:outputPanel rendered="{!documentChange.New_Due_Date__c==null}">
                                        <apex:outputText value="{!documentChange.New_Owner__r.Name}"></apex:outputText>
                                    </apex:outputPanel>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                    <table class="table table-responsive table-bordered">
                        <tbody>
                            <tr>
                                <th>Approver</th>
                                <th>Status</th>
                                <th>Approved Date</th>
                            </tr>
                            
                            <apex:repeat value="{!closureChangeProcess}" var="pi">
                                
                                <apex:repeat value="{!pi.Workitems}" var="ps"><tr>
                                    <td>{!User[ps.OriginalActorid].Name}</td>
                                    <td>started</td>
                                    <td>
                                        <apex:outputText value="{0,date,dd MMM yyyy}">
                                            <apex:param value="{!ps.CreatedDate}" /> 
                                        </apex:outputText> 
                                    </td>  </tr>                                         
                                </apex:repeat>
                                
                                
                                <apex:variable value="{!0}" var="submitter"/>
                                <apex:repeat value="{!pi.Steps}" var="ps">
                                    <apex:variable value="{!submitter+1}" var="submitter"/>
                                    <apex:outputPanel rendered="{!submitter>1}" >
                                        <tr>
                                            <td>{!User[ps.OriginalActorid].Name}</td>
                                            <td>{!ps.StepStatus}</td>
                                            <td>
                                                <apex:outputText value="{0,date,dd MMM yyyy}">
                                                    <apex:param value="{!ps.CreatedDate}" /> 
                                                </apex:outputText> 
                                            </td>  
                                        </tr>
                                    </apex:outputPanel>                                           
                                </apex:repeat>
                                
                            </apex:repeat>
                            
                        </tbody>
                    </table>
                </apex:outputPanel>   
                <!--=======================================-->
                
                <apex:outputPanel rendered="true">
                    <h2>Approvers</h2>
                    <table class="table table-responsive table-bordered">
                        <tbody>
                            <tr>
                                <th>Approver</th>
                                <th>Sequence</th>
                                <th>Allowed Days</th>
                                <th>Due Date</th>
                                <th>Status</th>
                                <th>Approved Date</th>
                            </tr>
                            <apex:repeat value="{!documentChangeApprovers}" var="ap">
                                <tr>
                                    <td>{!Ap.Approver_Name__c}</td>
                                    <td>{!Ap.Sequence_Position__c}</td>
                                    <td>{!Ap.Allowed_Days__c}</td>
                                    <td>
                                        <apex:outputText value="{0,date,dd MMM yyyy}">
                                            <apex:param value="{!Ap.Due_Date__c}" /> 
                                        </apex:outputText>                                  
                                    </td>
                                    <td><apex:outputText value="{!Ap.Status__c}" rendered="{!OR(documentChange.Status__c=='Pending Approval',documentChange.Status__c=='Closed')}"></apex:outputText></td>
                                    <td>
                                        <apex:outputText rendered="{!OR(documentChange.Status__c=='Pending Approval',documentChange.Status__c=='Closed')}"  value="{0,date,dd MMM yyyy}">
                                            <apex:param value="{!Ap.Status_Updated__c}" /> 
                                        </apex:outputText>                                      
                                    </td>
                                </tr>                                
                            </apex:repeat>
                            
                        </tbody>
                    </table>
                </apex:outputPanel>
                
                
                
                
                
                
                
              
                
            </div>
        </div>
    </div>
    
      <!------------------------print only--------------------------------->
            <div class="print-only">
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="headingOne">
                        <h4 class="panel-title"><h1>   DocumentChange - {!documentChange.Owner__r.Name} | &nbsp;
                                  <apex:outputText value="{0,date,dd MMM yyyy}">
                                      <apex:param value="{!implementation.Due_Date__c}" /> 
                                  </apex:outputText>
                              ({!documentChangeApprovers.size})</h1></h4>
                            <div >
                                <script>
                                function showChanges(id,hrefId){
                                    var iClass = $(id).find('i').attr('class');
                                    if(iClass == 'fa fa-plus'){
                                        $(id).find('i').attr('class','fa fa-minus');
                                        $('#'+hrefId).removeAttr('class');
                                    }else{
                                        $(id).find('i').attr('class','fa fa-plus');
                                        $('#'+hrefId).attr('class','hidden');
                                    }
                                }
                                
                                function showDocSpecificChanges(anchorElemid,hrefId){
                                    var iElemClass = $(anchorElemid).find('i').attr('class');
                                    if(iElemClass == 'fa fa-plus'){
                                        //alert('inside the if startement'+iElemClass);
                                        $(anchorElemid).find('i').attr('class','fa fa-minus');
                                        $('#'+hrefId).removeAttr('class');
                                    }else{
                                        // alert('inside the else statement ');
                                        $(anchorElemid).find('i').attr('class','fa fa-plus');
                                        $('#'+hrefId).attr('class','hidden');
                                    }
                                }
                                </script>
                                
                                <!-- Table -->
                                <table class="table table-hover table-bordered">
                                    <tbody>
                                        <tr>
                                            <th>{!JSENCODE($ObjectType.Sub_Change_Management__c.Fields.Type__c.Label)}</th>
                                            <th width="30%">{!JSENCODE($ObjectType.Sub_Change_Management__c.Fields.Document_Profile__c.Label)} / {!JSENCODE($ObjectType.Sub_Change_Management__c.Fields.Document_Name__c.Label)}</th>
                                            <th>{!JSENCODE($ObjectType.Sub_Change_Management__c.Fields.Current_Rev__c.Label)}</th>
                                            <th>{!JSENCODE($ObjectType.Sub_Change_Management__c.Fields.New_Rev__c.Label)}</th>
                                            <th>{!JSENCODE($ObjectType.Sub_Change_Management__c.Fields.Status__c.Label)}</th>
                                            <th>{!JSENCODE($ObjectType.Sub_Change_Management__c.Fields.Relation__c.Label)}</th>
                                            <th>{!JSENCODE($ObjectType.Sub_Change_Management__c.Fields.Owner__c.Label)}</th>
                                            <th class="text-center">Actions</th>
                                            <th class="text-center">Act. Status</th>
                                        </tr>
                                        <apex:repeat value="{!documents}" var="doc">
                                            <tr class="text-v-center" id="docInfoRow1">
                                                <td id="docInfoRow1_Type">
                                                    <a role="button" href="#{!JSENCODE(doc.Id)}" id="{!JSENCODE(doc.Id)}_href" onclick="showChanges(this,'{!JSENCODE(doc.Id)}');">
                                                        <i class="fa fa-plus"></i>&nbsp;<apex:outputText value="{!doc.Type__c}"/>
                                                    </a>    
                                                </td>
                                                <td id="{!JSENCODE(doc.Id)}_Doc">
                                                    
                                                </td>
                                                <td id="docInfoRow1_CurRev"><apex:outputText value="{!doc.Current_Rev__c}" /></td>
                                                <td id="docInfoRow1_NewRev"><apex:outputText value="{!doc.New_Rev__c}"/></td>
                                                <td id="docInfoRow1_Status"><apex:outputText value="{!doc.Status__c}"/></td>
                                                <td id="docInfoRow1_Relation"><apex:outputText value="{!doc.Relation__c}"/></td>
                                                <td id="docInfoRow1_Owner"><!--<apex:outputText value="{!doc.Owner__c}"/>--></td>
                                                <td class="text-center">
                                                    <button id="compactionbtn{!JSENCODE(doc.Id)}"  href="#" class="btn btn-{!IF(JSENCODE(doc.Type__c)=='New','success',IF(JSENCODE(doc.Type__c)=='Revise','primary','warning'))} btn-xs" disabled="true">
                                                        {!IF(JSENCODE(doc.Type__c)=='New','Create',JSENCODE(doc.Type__c))}</button>
                                                    
                                                </td>
                                                <td id="{!JSENCODE(doc.Id)}_tdCheck" class="text-center text-danger">
                                                    <i id="{!JSENCODE(doc.Id)}_iCheck" class="fa fa-folder-open"></i>
                                                    
                                                </td>
                                                
                                            </tr>
                                            <tr id="{!JSENCODE(doc.Id)}" class="hidden">
                                                <td colspan="9" id="docInfoRow2_Changes">
                                                    <p>
                                                        <apex:outputText value="{!doc.Document_Specific_Changes__c}"/>
                                                    </p>
                                                </td>
                                            </tr>
                                        </apex:repeat>
                                        <apex:repeat value="{!docs}" var="d">
                                            <tr>
                                                <td><a role="button" href="#{!JSENCODE(d.Id)}" id="{!JSENCODE(d.Id)}_href" onclick="showDocSpecificChanges(this,'{!JSENCODE(d.Id)}');">
                                                    <i class="fa fa-plus"></i>&nbsp;<apex:outputText value="{!JSENCODE(d.Type__c)}"/></a>
                                                </td>
                                                <td>{!JSENCODE(d.Name)}</td>
                                                <td>{!JSENCODE(d.Current_Rev__c)}</td>
                                                <td>{!JSENCODE(d.New_Rev__c)}</td>
                                                <td>{!JSENCODE(d.Status__c)}</td>
                                                <td>{!JSENCODE(d.Relation__c)}</td>
                                                <td>{!JSENCODE(d.Owner.Name)}</td>
                                                <td class="text-center">
                                                    <button id="compactionbtn{!JSENCODE(d.Id)}"  href="#" class="btn btn-{!IF(JSENCODE(d.Type__c)=='New','success',IF(JSENCODE(d.Type__c)=='Revise','primary','warning'))} btn-xs"
                                                            disabled="{!JSENCODE(d.Action_Status__c)=='Completed'}">{!IF(JSENCODE(d.Type__c)=='New','Create',JSENCODE(d.Type__c))}</button>
                                                </td>
                                                <td class="text-center text-{!IF(AND(JSENCODE(d.Action_Status__c)=='Completed'),'success','danger')}">
                                                    <i class="fa fa-{!IF(AND(JSENCODE(d.Action_Status__c)=='Completed'),'check-circle','folder-open')}" id="{!JSENCODE(d.Id)}image"></i>
                                                </td>
                                            </tr>
                                            <tr id="{!JSENCODE(d.Id)}" class="hidden">
                                                <td colspan="9" id="docspec1_Changes">
                                                    <p>
                                                        <apex:outputText value="{!d.Document_Specific_Changes__c}"/> 
                                                    </p>
                                                </td>
                                            </tr>
                                            
                                        </apex:repeat>
                                    </tbody>
                                </table>
                            </div>  

                        <apex:outputPanel rendered="true">
                                  <h2>Approvers</h2>
                                  <table class="table table-responsive table-bordered">
                                      <tbody>
                                          <tr>
                                              <th>Approver</th>
                                              <th>Sequence</th>
                                              <th>Allowed Days</th>
                                              <th>Due Date</th>
                                              <th>Status</th>
                                              <th>Approved Date</th>
                                          </tr>
                                          <apex:repeat value="{!documentChangeApprovers}" var="Ap">
                                              <tr>
                                                  <td>{!Ap.Approver_Name__c}</td>
                                                  <td>{!Ap.Sequence_Position__c}</td>
                                                  <td>{!Ap.Allowed_Days__c}</td>
                                                  <td>
                                                      <apex:outputText value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!Ap.Due_Date__c}" /> 
                                                      </apex:outputText>                                  
                                                  </td>
                                                  <td><apex:outputText value="{!Ap.Status__c}" rendered="{!OR(documentChange.Status__c=='Pending Approval',documentChange.Status__c=='Closed')}"></apex:outputText></td>
                                                  <td>
                                                      <apex:outputText rendered="{!OR(documentChange.Status__c=='Pending Approval',documentChange.Status__c=='Closed')}" value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!Ap.Status_Updated__c}" /> 
                                                      </apex:outputText>                                      
                                                  </td>
                                              </tr>                                
                                          </apex:repeat>
                                          
                                      </tbody>
                                  </table>    
                        </apex:outputPanel>
                    </div>
                </div>
            </div>
    <!--CompleteActionPlan start--
    <div class="panel panel-default screen-only">
        <div class="panel-heading" role="tab" id="headingOne">
            <h4 class="panel-title">
                <a class="btn btn-link btn-xs pull-right" data-toggle="collapse" data-parent="#accordionCompleteActionPlanTask" href="#CompleteActionPlanTask" aria-expanded="true" aria-controls="Containment_Action"><span class="glyphicon glyphicon-chevron-down" aria-hidden="true"></span>
                    
                </a><a class="" data-toggle="collapse" data-parent="#accordionCompleteActionPlanTask" href="#CompleteActionPlanTask" aria-expanded="true" aria-controls="CompleteActionPlanTask">
                CompleteActionPlan 
                </a>
            </h4>
        </div>
        <div aria-expanded="true" style="" id="CompleteActionPlanTask" class="panel-collapse out collapse out" role="tabpanel" aria-labelledby="headingOne">
            <div class="panel-body">
                <apex:outputPanel rendered="true">
                    <div class="col-md-12">
                        
                        <table class="table table-hover table-bordered" id="docInfoTable">
                                                <tr id="docTableHeader">
                                                    <th>Type</th>
                                                    <th width="30%">Doc No./Doc Name</th>
                                                    <th>Current Rev.</th>
                                                    <th>New Rev.</th>
                                                    <th>Status</th>
                                                    <th width="15%">Relation</th>
                                                    <th class="text-center">Action</th>
                                                    <th class="text-center">Complete?</th>
                                                </tr>
                            <apex:repeat value="{!docs}" var="d">
                                <tr>
                                    <td><a role="button" href="#{!JSENCODE(d.Id)}" id="{!JSENCODE(d.Id)}_href" onclick="">
                                        <apex:outputText value="{!JSENCODE(d.Type__c)}"/></a>
                                    </td>
                                    <td>{!JSENCODE(d.Name)}</td>
                                    <td>{!IF(JSENCODE(d.Type__c)=="New",null,JSENCODE(d.Current_Rev__c))}</td>
                                    <td>{!IF(JSENCODE(d.Type__c)=="New",null,JSENCODE(d.New_Rev__c))}</td>
                                    <td>{!IF(JSENCODE(d.Type__c)=="New",null,JSENCODE(d.Status__c))}</td>
                                    <td>{!IF(JSENCODE(d.Type__c)=="New",null,JSENCODE(d.Relation__c))}</td>
                                    <td class="text-center">
                                        <button id="compactionbtn{!JSENCODE(d.Id)}"  href="#" class="btn btn-{!IF(JSENCODE(d.Type__c)=='New','success',IF(JSENCODE(d.Type__c)=='Revise','primary','warning'))} btn-xs"
                                                onclick=""
                                                disabled="{!JSENCODE(d.Action_Status__c)=='Completed'}">{!IF(JSENCODE(d.Type__c)=='New','Create',JSENCODE(d.Type__c))}</button>
                                        
                                    </td>
                                    <td class="text-center text-{!IF(JSENCODE(d.Action_Status__c)=='Completed','success','danger')}">
                                        <i class="fa fa-{!IF(JSENCODE(d.Action_Status__c)=='Completed','check-circle','folder-open')}" id="{!JSENCODE(d.Id)}image"></i>
                                    </td>
                                </tr>
                                
                                
                            </apex:repeat>
                        </table>                          
                    </div>
                </apex:outputPanel>
            </div>
        </div>
    </div>-->

</apex:outputPanel>
<!---v1.1 end For CR Details --->

<apex:outputPanel rendered="{!NOT(ISNULL(closureTask))}">
    <div class="panel panel-default screen-only">
                        <div class="panel-heading" role="tab" id="headingOne">
                          <h4 class="panel-title">
                            <a class="btn btn-link btn-xs pull-right" data-toggle="collapse" data-parent="#accordionCLosureDetails" href="#CLosureDetails" aria-expanded="true" aria-controls="CLosureDetails"><span class="glyphicon glyphicon-chevron-down" aria-hidden="true"></span>
                            
                            </a><a class="" data-toggle="collapse" data-parent="#accordionCLosureDetails" href="#CLosureDetails" aria-expanded="true" aria-controls="CLosureDetails">
                              Closure - {!closure.Owner__r.Name} | &nbsp;
                                  <apex:outputText value="{0,date,dd MMM yyyy}">
                                      <apex:param value="{!closure.Due_Date__c}" /> 
                                  </apex:outputText>
                              <span class="badge red-badge">{!closureApprovers.size}</span>
                            </a>
                          </h4>
                        </div>
                        <div aria-expanded="true" style="" id="CLosureDetails" class="panel-collapse out collapse out" role="tabpanel" aria-labelledby="headingOne">
                          <div class="panel-body">
                                  <table class="table table-responsive table-bordered">
                                      <tbody>
                                          <tr>
                                              <th>Owner</th>
                                              <th>Due Date</th>
                                              <th>Status</th>
                                          </tr>
                                          
                                          <tr>

                                                  <td>{!Closure.Owner.Name}</td>
                                                  <td>
                                                      <apex:outputText value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!Closure.Due_Date__c}" /> 
                                                      </apex:outputText>
                                                  </td>
                                                  <td>{!Closure.Status__c}</td>
                                          </tr>   
                                          
                                         <apex:outputPanel rendered="{!module=='ChangeManagement'}">
                                         
                                                                                               
                                                    <tr>
                                                        <td style="width: 20%">
                                                            {!JSENCODE($ObjectType.General_Task__c.Fields.Closure_Comment__c.Label)}: 
                                                        </td>
                                                        <td colspan="2">
                                                           <apex:outputfield value="{!closureTask.Closure_Comment__c}"/> 
                                                        </td>
                                                    </tr>
                                                    
                                                     
                                             
                                         </apex:outputPanel>                                                        
                                      </tbody>
                                  </table>
                                  
                               
                        <apex:outputPanel rendered="{!OR(Closure.New_Due_Date__c!=null,Closure.New_Owner__c!=null)}">
                            <h2>Approvers For Change <apex:outputText value="{!if(Closure.New_Due_Date__c!=null,' Due Date',' Owner')}"></apex:outputText></h2>
                            <table class="table table-responsive table-bordered">
                                <tbody>
                                    <tr>
                                        <th><apex:outputText value="{!if(Closure.New_Due_Date__c!=null,' Due Date',' Owner')}"></apex:outputText></th>
                                        <th><apex:outputText value="{!if(Closure.New_Due_Date__c!=null,'New Due Date','New Owner')}"></apex:outputText></th>
                                    </tr>
                                    <tr>
                                        <td>  
                                            <apex:outputPanel rendered="{!Closure.New_Due_Date__c!=null}">
                                                <apex:outputText value="{0,date,dd MMM yyyy}">
                                                    <apex:param value="{!Closure.Due_Date__c}" /> 
                                                </apex:outputText> 
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!Closure.New_Due_Date__c==null}">
                                                <apex:outputText value="{!Closure.Owner.Name}"></apex:outputText>
                                            </apex:outputPanel>                                            
                                            
                                            
                                        </td>
                                        <td>
                                            <apex:outputPanel rendered="{!Closure.New_Due_Date__c!=null}">
                                                <apex:outputText value="{0,date,dd MMM yyyy}">
                                                    <apex:param value="{!Closure.New_Due_Date__c}" /> 
                                                </apex:outputText> 
                                            </apex:outputPanel>
                                            <apex:outputPanel rendered="{!Closure.New_Due_Date__c==null}">
                                                <apex:outputText value="{!Closure.New_Owner__r.Name}"></apex:outputText>
                                            </apex:outputPanel>
                                        </td>
                                    </tr>
                                </tbody>
                            </table>
                            <table class="table table-responsive table-bordered">
                                <tbody>
                                    <tr>
                                        <th>Approver</th>
                                        <th>Status</th>
                                        <th>Approved Date</th>
                                    </tr>
                                    
                                    <apex:repeat value="{!closureChangeProcess}" var="pi">
                                        
                                            <apex:repeat value="{!pi.Workitems}" var="ps"><tr>
                                                <td>{!User[ps.OriginalActorid].Name}</td>
                                                <td>started</td>
                                                <td>
                                                    <apex:outputText value="{0,date,dd MMM yyyy}">
                                                        <apex:param value="{!ps.CreatedDate}" /> 
                                                    </apex:outputText> 
                                                </td>  </tr>                                         
                                            </apex:repeat>
                                        
                                        
                                            <apex:variable value="{!0}" var="submitter"/>
                                            <apex:repeat value="{!pi.Steps}" var="ps">
                                                   <apex:variable value="{!submitter+1}" var="submitter"/>
                                                    <apex:outputPanel rendered="{!submitter>1}" >
                                                    <tr>
                                                    <td>{!User[ps.OriginalActorid].Name}</td>
                                                    <td>{!ps.StepStatus}</td>
                                                    <td>
                                                        <apex:outputText value="{0,date,dd MMM yyyy}">
                                                            <apex:param value="{!ps.CreatedDate}" /> 
                                                        </apex:outputText> 
                                                    </td>  
                                                </tr>
                                                </apex:outputPanel>                                           
                                            </apex:repeat>
                                        
                                    </apex:repeat>
                                    
                                </tbody>
                            </table>
                        </apex:outputPanel>  
                              
                              
                              <apex:outputPanel rendered="true">
                                  <h2>Approvers</h2>
                                  <table class="table table-responsive table-bordered">
                                      <tbody>
                                          <tr>
                                              <th>Approver</th>
                                              <th>Sequence</th>
                                              <th>Allowed Days</th>
                                              <th>Due Date</th>
                                              <th>Status</th>
                                              <th>Approved Date</th>
                                          </tr>
                                          <apex:repeat value="{!closureApprovers}" var="ap">
                                              <tr>
                                                  <td>{!Ap.Approver_Name__c}</td>
                                                  <td>{!Ap.Sequence_Position__c}</td>
                                                  <td>{!Ap.Allowed_Days__c}</td>
                                                  <td>
                                                      <apex:outputText value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!Ap.Due_Date__c}" /> 
                                                      </apex:outputText>                                  
                                                  </td>
                                                  <td><apex:outputText value="{!Ap.Status__c}" rendered="{!OR(Closure.Status__c=='Pending Approval',Closure.Status__c=='Closed')}"></apex:outputText></td>
                                                  <td>
                                                      <apex:outputText rendered="{!OR(Closure.Status__c=='Pending Approval',Closure.Status__c=='Closed')}"  value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!Ap.Status_Updated__c}" /> 
                                                      </apex:outputText>                                      
                                                  </td>
                                              </tr>                                
                                          </apex:repeat>
                                          
                                      </tbody>
                                  </table>
                              </apex:outputPanel>
                          </div>
                        </div>
                      </div>
              <div class="print-only">
                <div class="panel panel-default">
                    <div class="panel-heading" role="tab" id="headingOne">
                        <h4 class="panel-title"><h1> Closure - {!Closure.Owner__r.Name} | &nbsp;
                                  <apex:outputText value="{0,date,dd MMM yyyy}">
                                      <apex:param value="{!Closure.Due_Date__c}" /> 
                                  </apex:outputText>
                              ({!closureApprovers.size})</h1></h4>
                               <table class="table table-responsive table-bordered">
                                      <tbody>
                                          <tr>
                                              <th>Owner</th>
                                              <th>Due Date</th>
                                              <th>Status</th>
                                          </tr>
                                          
                                          <tr>

                                                  <td>{!Closure.Owner.Name}</td>
                                                  <td>
                                                      <apex:outputText value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!Closure.Due_Date__c}" /> 
                                                      </apex:outputText>
                                                  </td>
                                                  <td>{!Closure.Status__c}</td>
                                          </tr>   
                                          
                                         <apex:outputPanel rendered="{!module=='ChangeManagement'}">
                                         
                                                                                               
                                                    <tr>
                                                        <td style="width: 20%">
                                                            {!JSENCODE($ObjectType.General_Task__c.Fields.Closure_Comment__c.Label)}: 
                                                        </td>
                                                        <td colspan="2">
                                                           <apex:outputfield value="{!closureTask.Closure_Comment__c}"/> 
                                                        </td>
                                                    </tr>
                                                    
                                                     
                                             
                                         </apex:outputPanel>                                                        
                                      </tbody>
                                  </table>
                               <apex:outputPanel rendered="true">
                                  <h2>Approvers</h2>
                                  <table class="table table-responsive table-bordered">
                                      <tbody>
                                          <tr>
                                              <th>Approver</th>
                                              <th>Sequence</th>
                                              <th>Allowed Days</th>
                                              <th>Due Date</th>
                                              <th>Status</th>
                                              <th>Approved Date</th>
                                          </tr>
                                          <apex:repeat value="{!closureApprovers}" var="Ap">
                                              <tr>
                                                  <td>{!Ap.Approver_Name__c}</td>
                                                  <td>{!Ap.Sequence_Position__c}</td>
                                                  <td>{!Ap.Allowed_Days__c}</td>
                                                  <td>
                                                      <apex:outputText value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!Ap.Due_Date__c}" /> 
                                                      </apex:outputText>                                  
                                                  </td>
                                                  <td><apex:outputText value="{!Ap.Status__c}" rendered="{!OR(Closure.Status__c=='Pending Approval',Closure.Status__c=='Closed')}"></apex:outputText></td>
                                                  <td>
                                                      <apex:outputText rendered="{!OR(Closure.Status__c=='Pending Approval',Closure.Status__c=='Closed')}" value="{0,date,dd MMM yyyy}">
                                                          <apex:param value="{!Ap.Status_Updated__c}" /> 
                                                      </apex:outputText>                                      
                                                  </td>
                                              </tr>                                
                                          </apex:repeat>
                                          
                                      </tbody>
                                  </table>    
                        </apex:outputPanel>
                    </div>
                </div>
            </div>

</apex:outputPanel>

</apex:component>